{"version":3,"sources":["state/DragSubject.ts","tools/Anim.ts","state/state.ts","tools/Vec.ts","tools/Pose.ts","tools/index.ts","state/actions.ts","steps/locations.ts","ControlPoints.tsx","MainTriangle.tsx","Measurement.tsx","steps/step1.tsx","Polygon.tsx","SquareLabel.tsx","steps/step4.tsx","PosedPolygon.tsx","steps/step5.tsx","Label.tsx","steps/step8.tsx","steps/index.ts","steps/step2.tsx","steps/step3.tsx","steps/step6.tsx","steps/step7.tsx","state/reducer.ts","state/selectors.ts","state/index.ts","hooks/useDims.ts","hooks/useDevice.ts","assets/sonobe.svg","Header.tsx","Prose.tsx","DebugPoints.tsx","MainTriangleReset.tsx","Slider.tsx","assets/play.svg","assets/pause.svg","assets/restart.svg","Controls.tsx","Illustration.tsx","hooks/useAnimationFrame.ts","hooks/useMouse.ts","Footer.tsx","App.tsx","index.tsx"],"names":["Type","DragSubject","type","hOffset","vOffset","handlers","this","None","none","RVertex","r","HVertex","h","VVertex","v","out","Anim","fn","duration","after","t","value","from","to","EaseNumber","EaseVector","anims","durations","Object","values","map","keys","reduce","acc","key","Math","max","diff","tNorm","plus","times","Device","Theme","Extras","SvgPath","pts","closePath","pts1","segmentDuration","length","seg","floor","pos","minus","fixed","slice","pt","x","y","join","SvgArc","root","start","end","startScaled","norm","init","final","startAngle","angle","xAxisRotation","cross","totalAngle","sweepFlag","tempFinal","rotate","Measurement","crossLength","crossDuration","lineDuration","mainLine","perp","crossStart1","crossStart2","crossEnd1","crossEnd2","fullCross","crossStartPath","linePath","crossEndPath","crossPos","linePos","Vec","rhs","scalar","sqrt","Error","denom","dot","num","cos","sin","atan2","PI","Pose","loc","noOp","sign","n","memo","cachedInput","cachedOutput","ActionType","initTri","smallInitTri","initState","ui","dims","width","height","triOutOfBounds","device","Laptop","theme","Light","tri","dragSubject","stepIndex","previousStep","PreviousStep","nextStep","NextStep","mouseDownRVertex","MouseDownRVertex","mouseDownHVertex","MouseDownHVertex","mouseDownVVertex","MouseDownVVertex","mouseMove","MouseMove","payload","mouseUp","MouseUp","makeThin","MakeThin","makeEven","MakeEven","updateDims","UpdateDims","updateDevice","UpdateDevice","resetMainTriangle","ResetMainTriangle","toggleTheme","ToggleTheme","vr","hr","vh","rv","rh","hv","aPerpNorm","aPerp","a0","a1","aSquare","aSquareLabel","half","bPerpNorm","bPerp","b0","b1","bSquare","bSquareLabel","cPerpNorm","vh1","vr1","proj","cPerp","c0","c1","cSquare","cSquareLabel","abOut","abIn","cAuxV","hrLength","vert","cAuxDiag","rh1","cAuxH","vrLength","horiz","SIDE_MEASURE_OFFSET","aMeasurementPerp","aMeasurementStart","aMeasurementEnd","bMeasurementPerp","bMeasurementStart","bMeasurementEnd","cMeasurementPerp","cMeasurementStart","cMeasurementEnd","SIDE_LABEL_OFFSET","aMeasurementLabel","bMeasurementLabel","cMeasurementLabel","abAuxSquare","cAuxSquare","abMeasurementHOut","vA0","abMeasurementVOut","hB1","aSquareMeasurement1Start","aSquareMeasurement1End","bSquareMeasurement1Start","bSquareMeasurement1End","aSquareMeasurement1Label","bSquareMeasurement1Label","aSquareMeasurement2Start","aSquareMeasurement2End","bSquareMeasurement2Start","bSquareMeasurement2End","aSquareMeasurement2Label","bSquareMeasurement2Label","isRightHanded","initTriPose","triCopyPts","triCopyC1Pose","triCopyC2Pose","triCopyC3Pose","triCopyAB1Pose","triCopyAB2Pose","triCopyAB3Pose","cMeasurementVOut","cMeasurementHOut","cSquareMeasurementA1Start","cSquareMeasurementA1End","cSquareMeasurementB1Start","cSquareMeasurementB1End","cSquareMeasurementA1Label","cSquareMeasurementB1Label","cSquareMeasurementA2Start","cSquareMeasurementA2End","cSquareMeasurementB2Start","cSquareMeasurementB2End","cSquareMeasurementA2Label","cSquareMeasurementB2Label","triCopyLabelOut","mainTriLabel","triCopyC1Label","triCopyC2Label","triCopyC3Label","triCopyAB1Label","triCopyAB2Label","triCopyAB3Label","vC1","vCAuxV","c1V","c1CAuxV","ControlPoints","props","React","useContext","StateContext","state","dispatch","rOpacity","hOpacity","vOpacity","handleRDown","A","handleHDown","handleVDown","className","cx","cy","fillOpacity","onMouseDown","onTouchStart","MainTriangle","fullPath","d","opacity","strokeOpacity","label","labelPos","labelOpacity","textAnchor","dominantBaseline","Polygon","SquareLabel","side","dy","PosedPolygon","pose","Label","name","steps","section","graphics","frame","controlPoints","useMemo","Fork","Ease","Wait","then","triangle","AnimExtras","animTriangle","measurements","dA","L","aOpacity","dB","bOpacity","dC","cOpacity","aLabelPos","bLabelPos","cLabelPos","onClick","squares","labels","aLabelOpacity","bLabelOpacity","cLabelOpacity","abPath","cPath","dA1","a1Opacity","dB1","b1Opacity","dA2","a2Opacity","dB2","b2Opacity","aLabel1Pos","bLabel1Pos","aLabel2Pos","bLabel2Pos","triCopies","initPose","copy1Pose","copy2Pose","copy3Pose","tri1Pose","tri1Opacity","tri2Pose","tri2Opacity","tri3Pose","tri3Opacity","animTriCopies","triPts","c2LabelOpacity","auxOpacity","auxLabelOpacity","mainTriOpacity","mainTriLabelOpacity","tri1LabelOpacity","tri2LabelOpacity","tri3LabelOpacity","squareLabelOpacity","triLabelOpacity","href","target","rel","angleMeasure1R","angleMeasure2R","anglePath","angleMeasure1APath","angleMeasure1BPath","angleMeasure2Path","angleMeasure3APath","angleMeasure3BPath","angleMeasure4Path","animAngles","reducer","action","reducePreviousStep","min","reduceNextStep","reduceMouseDownRVertex","reduceMouseDownHVertex","reduceMouseDownVVertex","mousePos","match","moveRVertex","hX","abs","VERTEX_PADDING","hY","newH","newR","moveHVertex","vX","vY","newV","moveVVertex","reduceMouseMove","isTriOutOfBounds","reduceMouseUp","makeThinLaptop","makeThinMobile","reduceMakeThin","makeEvenLaptop","makeEvenMobile","reduceMakeEven","reduceUpdateDims","currentDevice","newDevice","Mobile","laptopToMobile","mobileToLaptop","reduceUpdateDevice","reduceResetMainTriangle","Dark","reduceToggleTheme","outX","outY","canGoPrevious","canGoNext","stepProgress","currentSection","currentGraphics","currentDuration","isLight","altThemeString","createContext","useDims","ref","onChange","useState","left","top","setDims","useLayoutEffect","computeDims","current","getBoundingClientRect","window","addEventListener","removeEventListener","useDevice","callback","useRef","recompute","innerWidth","Header","id","src","sonobe","alt","S","Prose","Section","DebugPoint","dx","DebugPolygon","DebugPoints","MainTriangleReset","Slider","mouseDown","setMouseDown","computeValue","clamp","X_PADDING","workingWidth","useEffect","handleMouseMove","e","clientX","handleTouchMove","touches","handleMouseUp","document","transform","sliderX","handleMouseDown","x1","y1","x2","y2","strokeWidth","strokeLinecap","Controls","playing","togglePlay","setFrame","restart","buttonHref","restartHref","pauseHref","playHref","buttonAlt","Illustration","animControls","deps","setPlaying","pausedFrame","rafHandle","requestAnimationFrame","step","timestamp","currentFrame","cancelAnimationFrame","useCallback","updateFrame","useAnimationFrame","centerX","centerY","bounds","setBounds","onMove","onUp","computeBounds","handleMove","clientY","handleUp","useMouse","translation","Graphics","debug","Footer","noPrevious","noNext","style","visibility","App","useReducer","Provider","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.05e2bade.chunk.js","sourcesContent":["export class DragSubject {\n  private type: Type;\n  private hOffset?: number;\n  private vOffset?: number;\n\n  static None(): DragSubject {\n    const out = new DragSubject();\n    out.type = Type.None;\n    return out;\n  }\n\n  static RVertex(hOffset: number, vOffset: number): DragSubject {\n    const out = new DragSubject();\n    out.type = Type.RVertex;\n    out.hOffset = hOffset;\n    out.vOffset = vOffset;\n    return out;\n  }\n\n  static HVertex(): DragSubject {\n    const out = new DragSubject();\n    out.type = Type.HVertex;\n    return out;\n  }\n\n  static VVertex(): DragSubject {\n    const out = new DragSubject();\n    out.type = Type.VVertex;\n    return out;\n  }\n\n  match<A>(handlers: Match<A>): A {\n    switch (this.type) {\n      case Type.None:\n        return handlers.none();\n      case Type.RVertex:\n        return handlers.r(this.hOffset as number, this.vOffset as number);\n      case Type.HVertex:\n        return handlers.h();\n      case Type.VVertex:\n        return handlers.v();\n    }\n  }\n}\n\nenum Type {\n  None = 'None',\n  RVertex = 'RVertex',\n  HVertex = 'HVertex',\n  VVertex = 'VVertex',\n}\n\nexport interface Match<A> {\n  none: () => A;\n  r: (hOffset: number, vOffset: number) => A;\n  h: () => A;\n  v: () => A;\n}\n","import { Vec } from './Vec';\n\nexport class Anim<A> {\n  constructor(public fn: AnimBehavior<A>, public duration: number) {}\n\n  then(after: Anim<A>): Anim<A> {\n    return new Anim(t => {\n      if (t < this.duration) {\n        return this.fn(t);\n      } else {\n        return after.fn(t - this.duration);\n      }\n    }, this.duration + after.duration);\n  }\n\n  static Wait<A>(value: A, duration: number): Anim<A> {\n    return new Anim(t => value, duration);\n  }\n\n  static Ease<V extends number | Vector>(\n    from: V,\n    to: V,\n    duration: number\n  ): Anim<V> {\n    if (typeof from === 'number' && typeof to === 'number') {\n      return Anim.EaseNumber(from, to, duration) as Anim<V>;\n    } else {\n      return Anim.EaseVector(from as Vector, to as Vector, duration) as Anim<V>;\n    }\n  }\n\n  static Fork<A>(anims: { [key: string]: Anim<any> }): Anim<A> {\n    const durations = Object.values(anims).map(({ duration }) => duration);\n    const duration = Math.max(...durations, 0);\n\n    return new Anim(t => {\n      const out = Object.keys(anims).reduce(\n        (acc, key) => ({\n          ...acc,\n          [key]: anims[key].fn(t),\n        }),\n        {}\n      );\n      return out;\n    }, duration) as Anim<A>;\n  }\n\n  private static EaseNumber(\n    from: number,\n    to: number,\n    duration: number\n  ): Anim<number> {\n    const diff = to - from;\n    return new Anim(t => {\n      if (t < duration) {\n        const tNorm = t / duration;\n        return from + diff * tNorm * tNorm * (3 - 2 * tNorm);\n      } else {\n        return to;\n      }\n    }, duration);\n  }\n\n  private static EaseVector<V extends Vector>(\n    from: V,\n    to: V,\n    duration: number\n  ): Anim<V> {\n    const diff = to.plus(from.times(-1));\n    return new Anim(t => {\n      if (t < duration) {\n        const tNorm = t / duration;\n        return from.plus(diff.times(tNorm * tNorm * (3 - 2 * tNorm)));\n      } else {\n        return to;\n      }\n    }, duration);\n  }\n}\n\ninterface AnimBehavior<A> {\n  (frame: number): A;\n}\n\nexport interface Vector {\n  plus(rhs: any): any;\n  times(scalar: any): any;\n}\n\nfunction animSvgPath(\n  pts: Vec[],\n  duration: number,\n  closePath = true\n): Anim<string> {\n  const pts1 = closePath ? [...pts, pts[0]] : pts;\n  const segmentDuration = duration / (pts1.length - 1);\n\n  return new Anim(t => {\n    if (t < duration) {\n      const seg = Math.floor(t / segmentDuration);\n      const from = pts1[seg];\n      const to = pts1[seg + 1];\n      const tNorm = (t - seg * segmentDuration) / segmentDuration;\n      const pos = from.plus(\n        to.minus(from).times(tNorm * tNorm * (3 - 2 * tNorm))\n      );\n      const fixed = pts1\n        .slice(0, seg + 1)\n        .map(pt => `${pt.x} ${pt.y}`)\n        .join(' L ');\n      return `M ${fixed} L ${pos.x} ${pos.y}`;\n    } else {\n      return `M ${pts.map(pt => `${pt.x} ${pt.y}`).join(' L ')}${\n        closePath ? 'Z' : ''\n      }`;\n    }\n  }, duration);\n}\n\nfunction animSvgArc(\n  root: Vec,\n  start: Vec,\n  end: Vec,\n  r: number,\n  duration: number\n): Anim<string> {\n  const startScaled = start.norm().times(r);\n  const init = root.plus(startScaled);\n  const final = root.plus(end.norm().times(r));\n  const startAngle = start.angle();\n  const xAxisRotation = startAngle;\n  const cross = start.cross(end);\n  const totalAngle = end.angle() - startAngle;\n  const sweepFlag = cross < 0 ? 0 : 1;\n\n  return new Anim(t => {\n    if (t < duration) {\n      const tNorm = t / duration;\n      const angle = totalAngle * tNorm * tNorm * (3 - 2 * tNorm);\n      const tempFinal = root.plus(startScaled.rotate(angle));\n      return `M ${init.x} ${init.y} A ${r} ${r}, ${xAxisRotation}, 0 ${sweepFlag}, ${tempFinal.x} ${tempFinal.y}`;\n    } else {\n      return `M ${init.x} ${init.y} A ${r} ${r}, ${xAxisRotation}, 0 ${sweepFlag}, ${final.x} ${final.y}`;\n    }\n  }, duration);\n}\n\nfunction animMeasurement(\n  start: Vec,\n  end: Vec,\n  crossLength: number,\n  duration: number\n): Anim<string> {\n  const crossDuration = 0.2 * duration;\n  const lineDuration = 0.6 * duration;\n\n  const mainLine = end.minus(start);\n  const perp = mainLine\n    .perp()\n    .norm()\n    .times(crossLength / 2);\n  const crossStart1 = start.plus(perp);\n  const crossStart2 = start.minus(perp);\n  const crossEnd1 = end.plus(perp);\n  const crossEnd2 = end.minus(perp);\n  const fullCross = perp.times(-2);\n\n  const crossStartPath = `M ${crossStart1.x} ${crossStart1.y} L ${crossStart2.x} ${crossStart2.y}`;\n  const linePath = `M ${start.x} ${start.y} L ${end.x} ${end.y}`;\n  const crossEndPath = `M ${crossEnd1.x} ${crossEnd1.y} L ${crossEnd2.x} ${crossEnd2.y}`;\n\n  return new Anim(t => {\n    if (t < crossDuration) {\n      // First cross\n      const tNorm = t / crossDuration;\n      const crossPos = crossStart1.plus(fullCross.times(tNorm));\n      return `M ${crossStart1.x} ${crossStart1.y} L ${crossPos.x} ${crossPos.y}`;\n    } else if (crossDuration <= t && t < crossDuration + lineDuration) {\n      // Main line\n      const tNorm = (t - crossDuration) / lineDuration;\n      const linePos = start.plus(\n        mainLine.times(tNorm * tNorm * (3 - 2 * tNorm))\n      );\n      return `${crossStartPath} M ${start.x} ${start.y} L ${linePos.x} ${linePos.y}`;\n    } else if (\n      crossDuration + lineDuration <= t &&\n      t < crossDuration + lineDuration + crossDuration\n    ) {\n      // Second cross\n      const tNorm = (t - crossDuration - lineDuration) / crossDuration;\n      const crossPos = crossEnd1.plus(fullCross.times(tNorm));\n      return `${crossStartPath} ${linePath} M ${crossEnd1.x} ${crossEnd1.y} L ${crossPos.x} ${crossPos.y}`;\n    } else {\n      // Full path\n      return `${crossStartPath} ${linePath} ${crossEndPath}`;\n    }\n  }, duration);\n}\n\nexport const Extras = {\n  SvgPath: animSvgPath,\n  SvgArc: animSvgArc,\n  Measurement: animMeasurement,\n};\n","import { DragSubject } from './DragSubject';\nimport { Vec } from '../tools';\n\nexport interface State {\n  ui: UIState;\n  tri: RightTriangle;\n  dragSubject: DragSubject;\n  stepIndex: number;\n}\n\nexport interface UIState {\n  device: Device;\n  dims: Dims;\n  triOutOfBounds: boolean;\n  theme: Theme;\n}\n\nexport enum Device {\n  Laptop = 'Laptop',\n  Mobile = 'Mobile',\n}\n\nexport enum Theme {\n  Light = 'Light',\n  Dark = 'Dark',\n}\n\nexport const initTri: RightTriangle = {\n  r: new Vec(-70, 0),\n  h: new Vec(70, 0),\n  v: new Vec(-70, -80),\n};\n\nexport const smallInitTri: RightTriangle = {\n  r: new Vec(-25, 20),\n  h: new Vec(25, 20),\n  v: new Vec(-25, -20),\n};\n\nexport const initState: State = {\n  ui: {\n    dims: { width: 0, height: 0 },\n    triOutOfBounds: false,\n    device: Device.Laptop,\n    theme: Theme.Light,\n  },\n  tri: initTri,\n  dragSubject: DragSubject.None(),\n  stepIndex: 0,\n};\n\n// v -> *\n//      |\\\n//      | \\\n// r -> *--* <- h\nexport interface RightTriangle {\n  r: Vec;\n  h: Vec;\n  v: Vec;\n}\n\nexport interface Dims {\n  width: number;\n  height: number;\n}\n","import { Vector } from './Anim';\n\nexport class Vec implements Vector {\n  constructor(public x: number, public y: number) {}\n\n  plus(rhs: Vec): Vec {\n    return new Vec(this.x + rhs.x, this.y + rhs.y);\n  }\n\n  times(scalar: number): Vec {\n    return new Vec(scalar * this.x, scalar * this.y);\n  }\n\n  minus(rhs: Vec): Vec {\n    return new Vec(this.x - rhs.x, this.y - rhs.y);\n  }\n\n  length(): number {\n    return Math.sqrt(this.x * this.x + this.y * this.y);\n  }\n\n  norm(): Vec {\n    const length = this.length();\n    if (length === 0) {\n      throw new Error('attempt to norm 0-vector');\n    }\n\n    return this.times(1 / length);\n  }\n\n  dot(rhs: Vec): number {\n    return this.x * rhs.x + this.y * rhs.y;\n  }\n\n  proj(rhs: Vec): Vec {\n    const denom = rhs.dot(rhs);\n    if (denom === 0) {\n      throw new Error('attempt to project onto the 0-vector');\n    }\n\n    const num = this.dot(rhs);\n    return rhs.times(num / denom);\n  }\n\n  perp(): Vec {\n    return new Vec(-this.y, this.x);\n  }\n\n  rotate(angle: number): Vec {\n    const { x, y } = this;\n    const cos = Math.cos(angle);\n    const sin = Math.sin(angle);\n\n    return new Vec(cos * x - sin * y, sin * x + cos * y);\n  }\n\n  cross(rhs: Vec): number {\n    return this.x * rhs.y - this.y * rhs.x;\n  }\n\n  angle(): number {\n    const angle = Math.atan2(this.y, this.x);\n    return angle < 0 ? angle + 2 * Math.PI : angle;\n  }\n}\n","import { Vector } from './index';\nimport { Vec } from './Vec';\n\nexport class Pose implements Vector {\n  constructor(public loc: Vec, public angle: number) {}\n\n  plus(rhs: Pose): Pose {\n    return new Pose(this.loc.plus(rhs.loc), this.angle + rhs.angle);\n  }\n\n  times(scalar: number): Pose {\n    return new Pose(this.loc.times(scalar), scalar * this.angle);\n  }\n}\n","export * from './Anim';\nexport * from './Vec';\nexport * from './Pose';\n\nexport function noOp(...args: any[]): any {}\n\nexport function sign(n: number): number {\n  if (n >= 0) {\n    return 1;\n  } else {\n    return -1;\n  }\n}\n\nexport function clamp(n: number, min: number, max: number): number {\n  if (n < min) {\n    return min;\n  } else if (n > max) {\n    return max;\n  } else {\n    return n;\n  }\n}\n\nexport function memo<A, B>(fn: (x: A) => B): (x: A) => B {\n  let cachedInput: A;\n  let cachedOutput: B;\n\n  return (x: A) => {\n    if (cachedInput && cachedInput === x) {\n      return cachedOutput;\n    }\n\n    cachedInput = x;\n    cachedOutput = fn(x);\n    return cachedOutput;\n  };\n}\n","import { Vec } from '../tools';\nimport { Dims, Device } from './state';\n\nexport interface Action {\n  type: string;\n  payload?: any;\n}\n\nexport enum ActionType {\n  PreviousStep = 'PreviousStep',\n  NextStep = 'NextStep',\n  MouseDownRVertex = 'MouseDownRVertex',\n  MouseDownHVertex = 'MouseDownHVertex',\n  MouseDownVVertex = 'MouseDownVVertex',\n  MouseMove = 'MouseMove',\n  MouseUp = 'MouseUp',\n  MakeThin = 'MakeThin',\n  MakeEven = 'MakeEven',\n  UpdateDims = 'UpdateDims',\n  UpdateDevice = 'UpdateDevice',\n  ResetMainTriangle = 'ResetMainTriangle',\n  ToggleTheme = 'ToggleTheme',\n}\n\nexport function previousStep(): Action {\n  return { type: ActionType.PreviousStep };\n}\n\nexport function nextStep(): Action {\n  return { type: ActionType.NextStep };\n}\n\nexport function mouseDownRVertex(): Action {\n  return { type: ActionType.MouseDownRVertex };\n}\n\nexport function mouseDownHVertex(): Action {\n  return { type: ActionType.MouseDownHVertex };\n}\n\nexport function mouseDownVVertex(): Action {\n  return { type: ActionType.MouseDownVVertex };\n}\n\nexport function mouseMove(pos: Vec): Action {\n  return { type: ActionType.MouseMove, payload: pos };\n}\n\nexport function mouseUp(): Action {\n  return { type: ActionType.MouseUp };\n}\n\nexport function makeThin(): Action {\n  return { type: ActionType.MakeThin };\n}\n\nexport function makeEven(): Action {\n  return { type: ActionType.MakeEven };\n}\n\nexport function updateDims(dims: Dims): Action {\n  return { type: ActionType.UpdateDims, payload: dims };\n}\n\nexport function updateDevice(device: Device): Action {\n  return { type: ActionType.UpdateDevice, payload: device };\n}\n\nexport function resetMainTriangle(): Action {\n  return { type: ActionType.ResetMainTriangle };\n}\n\nexport function toggleTheme(): Action {\n  return { type: ActionType.ToggleTheme };\n}\n","import { Vec, Pose, memo } from '../tools';\nimport { RightTriangle } from '../state';\n\ninterface Selector<A> {\n  (tri: RightTriangle): A;\n}\n\nexport const vr: Selector<Vec> = memo(tri => tri.r.minus(tri.v));\n\nexport const hr: Selector<Vec> = memo(tri => tri.r.minus(tri.h));\n\nexport const vh: Selector<Vec> = memo(tri => tri.h.minus(tri.v));\n\nexport const rv: Selector<Vec> = memo(tri => vr(tri).times(-1));\n\nexport const rh: Selector<Vec> = memo(tri => hr(tri).times(-1));\n\nexport const hv: Selector<Vec> = memo(tri => vh(tri).times(-1));\n\nexport const aPerpNorm: Selector<Vec> = memo(tri => {\n  return hr(tri).norm();\n});\n\nexport const aPerp: Selector<Vec> = memo(tri => {\n  const length = vr(tri).length();\n  return aPerpNorm(tri).times(length);\n});\n\nexport const a0: Selector<Vec> = memo(tri => {\n  return tri.v.plus(aPerp(tri));\n});\n\nexport const a1: Selector<Vec> = memo(tri => {\n  return tri.r.plus(aPerp(tri));\n});\n\nexport const aSquare: Selector<Vec[]> = memo(tri => [\n  tri.v,\n  a0(tri),\n  a1(tri),\n  tri.r,\n]);\n\nexport const aSquareLabel: Selector<Vec> = memo(tri => {\n  const half = a0(tri)\n    .minus(tri.r)\n    .times(1 / 2);\n  return tri.r.plus(half);\n});\n\nexport const bPerpNorm: Selector<Vec> = memo(tri => {\n  return vr(tri).norm();\n});\n\nexport const bPerp: Selector<Vec> = memo(tri => {\n  const length = hr(tri).length();\n  return bPerpNorm(tri).times(length);\n});\n\nexport const b0: Selector<Vec> = memo(tri => {\n  return tri.r.plus(bPerp(tri));\n});\n\nexport const b1: Selector<Vec> = memo(tri => {\n  return tri.h.plus(bPerp(tri));\n});\n\nexport const bSquare: Selector<Vec[]> = memo(tri => [\n  tri.r,\n  b0(tri),\n  b1(tri),\n  tri.h,\n]);\n\nexport const bSquareLabel: Selector<Vec> = memo(tri => {\n  const half = b0(tri)\n    .minus(tri.h)\n    .times(1 / 2);\n  return tri.h.plus(half);\n});\n\nexport const cPerpNorm: Selector<Vec> = memo(tri => {\n  const vh1 = vh(tri);\n  const vr1 = vr(tri);\n  const proj = vr1.proj(vh1);\n  return proj.minus(vr1).norm();\n});\n\nexport const cPerp: Selector<Vec> = memo(tri => {\n  const length = vh(tri).length();\n  return cPerpNorm(tri).times(length);\n});\n\nexport const c0: Selector<Vec> = memo(tri => {\n  return tri.h.plus(cPerp(tri));\n});\n\nexport const c1: Selector<Vec> = memo(tri => {\n  return tri.v.plus(cPerp(tri));\n});\n\nexport const cSquare: Selector<Vec[]> = memo(tri => [\n  tri.h,\n  c0(tri),\n  c1(tri),\n  tri.v,\n]);\n\nexport const cSquareLabel: Selector<Vec> = memo(tri => {\n  const half = c0(tri)\n    .minus(tri.v)\n    .times(1 / 2);\n  return tri.v.plus(half);\n});\n\nexport const abOut: Selector<Vec> = memo(tri => {\n  return b0(tri).plus(aPerp(tri));\n});\n\nexport const abIn: Selector<Vec> = memo(tri => {\n  return tri.h.plus(rv(tri));\n});\n\nexport const cAuxV: Selector<Vec> = memo(tri => {\n  const hrLength = hr(tri).length();\n  const vert = rv(tri).norm().times(hrLength);\n  return tri.v.plus(vert);\n});\n\nexport const cAuxDiag: Selector<Vec> = memo(tri => {\n  const rh1 = rh(tri);\n  const length = rh1.length() + vr(tri).length();\n  const out = rh1.norm().times(length);\n  return cAuxV(tri).plus(out);\n});\n\nexport const cAuxH: Selector<Vec> = memo(tri => {\n  const vrLength = vr(tri).length();\n  const horiz = rh(tri).norm().times(vrLength);\n  return tri.h.plus(horiz);\n});\n\nconst SIDE_MEASURE_OFFSET = 30;\n\nexport const aMeasurementPerp: Selector<Vec> = memo(tri =>\n  aPerpNorm(tri).times(SIDE_MEASURE_OFFSET)\n);\n\nexport const aMeasurementStart: Selector<Vec> = memo(tri =>\n  tri.v.plus(aMeasurementPerp(tri))\n);\n\nexport const aMeasurementEnd: Selector<Vec> = memo(tri =>\n  tri.r.plus(aMeasurementPerp(tri))\n);\n\nexport const bMeasurementPerp: Selector<Vec> = memo(tri =>\n  bPerpNorm(tri).times(SIDE_MEASURE_OFFSET)\n);\n\nexport const bMeasurementStart: Selector<Vec> = memo(tri =>\n  tri.r.plus(bMeasurementPerp(tri))\n);\n\nexport const bMeasurementEnd: Selector<Vec> = memo(tri =>\n  tri.h.plus(bMeasurementPerp(tri))\n);\n\nexport const cMeasurementPerp: Selector<Vec> = memo(tri =>\n  cPerpNorm(tri).times(SIDE_MEASURE_OFFSET)\n);\n\nexport const cMeasurementStart: Selector<Vec> = memo(tri =>\n  tri.h.plus(cMeasurementPerp(tri))\n);\n\nexport const cMeasurementEnd: Selector<Vec> = memo(tri =>\n  tri.v.plus(cMeasurementPerp(tri))\n);\n\nconst SIDE_LABEL_OFFSET = 20;\n\nexport const aMeasurementLabel: Selector<Vec> = memo(tri => {\n  const start = aMeasurementStart(tri);\n  const end = aMeasurementEnd(tri);\n  const half = end.minus(start).times(1 / 2);\n  const out = aPerpNorm(tri).times(SIDE_LABEL_OFFSET);\n  return start.plus(half).plus(out);\n});\n\nexport const bMeasurementLabel: Selector<Vec> = memo(tri => {\n  const start = bMeasurementStart(tri);\n  const end = bMeasurementEnd(tri);\n  const half = end.minus(start).times(1 / 2);\n  const out = bPerpNorm(tri).times(SIDE_LABEL_OFFSET);\n  return start.plus(half).plus(out);\n});\n\nexport const cMeasurementLabel: Selector<Vec> = memo(tri => {\n  const start = cMeasurementStart(tri);\n  const end = cMeasurementEnd(tri);\n  const half = end.minus(start).times(1 / 2);\n  const out = cPerpNorm(tri).times(SIDE_LABEL_OFFSET);\n  return start.plus(half).plus(out);\n});\n\nexport const abAuxSquare: Selector<Vec[]> = memo(tri => [\n  tri.v,\n  a0(tri),\n  abOut(tri),\n  b1(tri),\n  abIn(tri),\n]);\n\nexport const cAuxSquare: Selector<Vec[]> = memo(tri => [\n  tri.r,\n  cAuxV(tri),\n  cAuxDiag(tri),\n  cAuxH(tri),\n]);\n\nexport const abMeasurementHOut: Selector<Vec> = memo(tri => {\n  const vA0 = a0(tri).minus(tri.v);\n  const out = vA0.norm().times(SIDE_MEASURE_OFFSET);\n  return vA0.plus(out);\n});\n\nexport const abMeasurementVOut: Selector<Vec> = memo(tri => {\n  const hB1 = b1(tri).minus(tri.h);\n  const out = hB1.norm().times(SIDE_MEASURE_OFFSET);\n  return hB1.plus(out);\n});\n\nexport const aSquareMeasurement1Start: Selector<Vec> = memo(tri =>\n  tri.v.plus(abMeasurementHOut(tri))\n);\n\nexport const aSquareMeasurement1End: Selector<Vec> = memo(tri =>\n  tri.r.plus(abMeasurementHOut(tri))\n);\n\nexport const bSquareMeasurement1Start: Selector<Vec> = aSquareMeasurement1End;\n\nexport const bSquareMeasurement1End: Selector<Vec> = memo(tri =>\n  b0(tri).plus(abMeasurementHOut(tri))\n);\n\nexport const aSquareMeasurement1Label: Selector<Vec> = memo(tri => {\n  const start = aSquareMeasurement1Start(tri);\n  const end = aSquareMeasurement1End(tri);\n  const half = end.minus(start).times(1 / 2);\n  const out = aPerpNorm(tri).times(SIDE_LABEL_OFFSET);\n  return start.plus(half).plus(out);\n});\n\nexport const bSquareMeasurement1Label: Selector<Vec> = memo(tri => {\n  const start = bSquareMeasurement1Start(tri);\n  const end = bSquareMeasurement1End(tri);\n  const half = end.minus(start).times(1 / 2);\n  const out = aPerpNorm(tri).times(SIDE_LABEL_OFFSET);\n  return start.plus(half).plus(out);\n});\n\nexport const aSquareMeasurement2Start: Selector<Vec> = memo(tri =>\n  a1(tri).plus(abMeasurementVOut(tri))\n);\n\nexport const aSquareMeasurement2End: Selector<Vec> = memo(tri =>\n  tri.r.plus(abMeasurementVOut(tri))\n);\n\nexport const bSquareMeasurement2Start: Selector<Vec> = aSquareMeasurement2End;\n\nexport const bSquareMeasurement2End: Selector<Vec> = memo(tri =>\n  tri.h.plus(abMeasurementVOut(tri))\n);\n\nexport const aSquareMeasurement2Label: Selector<Vec> = memo(tri => {\n  const start = aSquareMeasurement2Start(tri);\n  const end = aSquareMeasurement2End(tri);\n  const half = end.minus(start).times(1 / 2);\n  const out = bPerpNorm(tri).times(SIDE_LABEL_OFFSET);\n  return start.plus(half).plus(out);\n});\n\nexport const bSquareMeasurement2Label: Selector<Vec> = memo(tri => {\n  const start = bSquareMeasurement2Start(tri);\n  const end = bSquareMeasurement2End(tri);\n  const half = end.minus(start).times(1 / 2);\n  const out = bPerpNorm(tri).times(SIDE_LABEL_OFFSET);\n  return start.plus(half).plus(out);\n});\n\nexport const isRightHanded: Selector<boolean> = memo(\n  tri => rh(tri).cross(rv(tri)) >= 0\n);\n\nexport const initTriPose: Selector<Pose> = memo(tri => new Pose(tri.r, 0));\n\nexport const triCopyPts: Selector<Vec[]> = memo(tri => [\n  new Vec(0, 0),\n  rh(tri),\n  rv(tri),\n]);\n\nexport const triCopyC1Pose: Selector<Pose> = memo(tri => {\n  const angle = isRightHanded(tri) ? -Math.PI / 2 : Math.PI / 2;\n  return new Pose(cAuxV(tri), angle);\n});\n\nexport const triCopyC2Pose: Selector<Pose> = memo(\n  tri => new Pose(cAuxDiag(tri), Math.PI)\n);\n\nexport const triCopyC3Pose: Selector<Pose> = memo(tri => {\n  const angle = isRightHanded(tri) ? (-3 * Math.PI) / 2 : (3 * Math.PI) / 2;\n  return new Pose(cAuxH(tri), angle);\n});\n\nexport const triCopyAB1Pose: Selector<Pose> = memo(\n  tri => new Pose(abIn(tri), Math.PI)\n);\n\nexport const triCopyAB2Pose: Selector<Pose> = memo(tri => {\n  const angle = isRightHanded(tri) ? -Math.PI / 2 : Math.PI / 2;\n  return new Pose(a1(tri), angle);\n});\n\nexport const triCopyAB3Pose: Selector<Pose> = memo(tri => {\n  const angle = isRightHanded(tri) ? Math.PI / 2 : -Math.PI / 2;\n  return new Pose(b0(tri), angle);\n});\n\nexport const cMeasurementVOut: Selector<Vec> = memo(tri =>\n  rv(tri).norm().times(SIDE_MEASURE_OFFSET)\n);\n\nexport const cMeasurementHOut: Selector<Vec> = memo(tri =>\n  rh(tri).norm().times(SIDE_MEASURE_OFFSET)\n);\n\nexport const cSquareMeasurementA1Start: Selector<Vec> = memo(tri =>\n  cAuxV(tri).plus(cMeasurementVOut(tri))\n);\n\nexport const cSquareMeasurementA1End: Selector<Vec> = memo(tri =>\n  c1(tri).plus(cMeasurementVOut(tri))\n);\n\nexport const cSquareMeasurementB1Start: Selector<Vec> = cSquareMeasurementA1End;\n\nexport const cSquareMeasurementB1End: Selector<Vec> = memo(tri =>\n  cAuxDiag(tri).plus(cMeasurementVOut(tri))\n);\n\nexport const cSquareMeasurementA1Label: Selector<Vec> = memo(tri => {\n  const start = cSquareMeasurementA1Start(tri);\n  const end = cSquareMeasurementA1End(tri);\n  const half = end.minus(start).times(1 / 2);\n  const out = bPerpNorm(tri).times(-SIDE_LABEL_OFFSET);\n  return start.plus(half).plus(out);\n});\n\nexport const cSquareMeasurementB1Label: Selector<Vec> = memo(tri => {\n  const start = cSquareMeasurementB1Start(tri);\n  const end = cSquareMeasurementB1End(tri);\n  const half = end.minus(start).times(1 / 2);\n  const out = bPerpNorm(tri).times(-SIDE_LABEL_OFFSET);\n  return start.plus(half).plus(out);\n});\n\nexport const cSquareMeasurementA2Start: Selector<Vec> = memo(tri =>\n  cAuxDiag(tri).plus(cMeasurementHOut(tri))\n);\n\nexport const cSquareMeasurementA2End: Selector<Vec> = memo(tri =>\n  c0(tri).plus(cMeasurementHOut(tri))\n);\n\nexport const cSquareMeasurementB2Start: Selector<Vec> = cSquareMeasurementA2End;\n\nexport const cSquareMeasurementB2End: Selector<Vec> = memo(tri =>\n  cAuxH(tri).plus(cMeasurementHOut(tri))\n);\n\nexport const cSquareMeasurementA2Label: Selector<Vec> = memo(tri => {\n  const start = cSquareMeasurementA2Start(tri);\n  const end = cSquareMeasurementA2End(tri);\n  const half = end.minus(start).times(1 / 2);\n  const out = aPerpNorm(tri).times(-SIDE_LABEL_OFFSET);\n  return start.plus(half).plus(out);\n});\n\nexport const cSquareMeasurementB2Label: Selector<Vec> = memo(tri => {\n  const start = cSquareMeasurementB2Start(tri);\n  const end = cSquareMeasurementB2End(tri);\n  const half = end.minus(start).times(1 / 2);\n  const out = aPerpNorm(tri).times(-SIDE_LABEL_OFFSET);\n  return start.plus(half).plus(out);\n});\n\nexport const triCopyLabelOut: Selector<Vec> = memo(tri => {\n  const vert = rv(tri).times(0.33);\n  const horiz = rh(tri).times(0.33);\n  return horiz.plus(vert);\n});\n\nexport const mainTriLabel: Selector<Vec> = memo(tri => {\n  return tri.r.plus(triCopyLabelOut(tri));\n});\n\nexport const triCopyC1Label: Selector<Vec> = memo(tri => {\n  const angle = isRightHanded(tri) ? (3 * Math.PI) / 2 : Math.PI / 2;\n  return cAuxV(tri).plus(triCopyLabelOut(tri).rotate(angle));\n});\n\nexport const triCopyC2Label: Selector<Vec> = memo(tri => {\n  return cAuxDiag(tri).plus(triCopyLabelOut(tri).rotate(Math.PI));\n});\n\nexport const triCopyC3Label: Selector<Vec> = memo(tri => {\n  const angle = isRightHanded(tri) ? Math.PI / 2 : (3 * Math.PI) / 2;\n  return cAuxH(tri).plus(triCopyLabelOut(tri).rotate(angle));\n});\n\nexport const triCopyAB1Label: Selector<Vec> = memo(tri => {\n  return abIn(tri).plus(triCopyLabelOut(tri).rotate(Math.PI));\n});\n\nexport const triCopyAB2Label: Selector<Vec> = memo(tri => {\n  const angle = isRightHanded(tri) ? -Math.PI / 2 : Math.PI / 2;\n  return a1(tri).plus(triCopyLabelOut(tri).rotate(angle));\n});\n\nexport const triCopyAB3Label: Selector<Vec> = memo(tri => {\n  const angle = isRightHanded(tri) ? Math.PI / 2 : -Math.PI / 2;\n  return b0(tri).plus(triCopyLabelOut(tri).rotate(angle));\n});\n\nexport const vC1: Selector<Vec> = memo(tri => c1(tri).minus(tri.v));\n\nexport const vCAuxV: Selector<Vec> = memo(tri => cAuxV(tri).minus(tri.v));\n\nexport const c1V: Selector<Vec> = memo(tri => vC1(tri).times(-1));\n\nexport const c1CAuxV: Selector<Vec> = memo(tri => cAuxV(tri).minus(c1(tri)));\n","import React from 'react';\nimport { StateContext, Actions as A } from './state';\n\nexport const CONTROL_POINT_RADIUS = 16;\n\nexport interface ControlPointsProps {\n  rOpacity?: number;\n  hOpacity?: number;\n  vOpacity?: number;\n}\n\nconst ControlPoints: React.FC<ControlPointsProps> = props => {\n  const { state, dispatch } = React.useContext(StateContext);\n  const { rOpacity = 0.5, hOpacity = 0.5, vOpacity = 0.5 } = props;\n\n  const { r, h, v } = state.tri;\n\n  function handleRDown() {\n    return dispatch(A.mouseDownRVertex());\n  }\n\n  function handleHDown() {\n    return dispatch(A.mouseDownHVertex());\n  }\n\n  function handleVDown() {\n    return dispatch(A.mouseDownVVertex());\n  }\n\n  return (\n    <g>\n      <circle\n        className=\"control-point\"\n        cx={r.x}\n        cy={r.y}\n        r={CONTROL_POINT_RADIUS}\n        fillOpacity={rOpacity}\n        onMouseDown={handleRDown}\n        onTouchStart={handleRDown}\n      />\n      <circle\n        className=\"control-point\"\n        cx={h.x}\n        cy={h.y}\n        r={CONTROL_POINT_RADIUS}\n        fillOpacity={hOpacity}\n        onMouseDown={handleHDown}\n        onTouchStart={handleHDown}\n      />\n      <circle\n        className=\"control-point\"\n        cx={v.x}\n        cy={v.y}\n        r={CONTROL_POINT_RADIUS}\n        fillOpacity={vOpacity}\n        onMouseDown={handleVDown}\n        onTouchStart={handleVDown}\n      />\n    </g>\n  );\n};\n\nexport default ControlPoints;\n","import React from 'react';\nimport { StateContext } from './state';\n\nexport interface MainTriangleProps {\n  d?: string;\n  opacity?: number;\n  strokeOpacity?: number;\n}\n\nconst MainTriangle: React.FC<MainTriangleProps> = props => {\n  const { state } = React.useContext(StateContext);\n  const { r, h, v } = state.tri;\n\n  const fullPath = `M ${r.x} ${r.y} L ${h.x} ${h.y} L ${v.x} ${v.y} Z`;\n\n  const { d = fullPath, opacity = 1, strokeOpacity = 1 } = props;\n\n  return (\n    <path\n      className=\"main-triangle\"\n      d={d}\n      fillOpacity={opacity}\n      strokeOpacity={strokeOpacity}\n    />\n  );\n};\n\nexport default MainTriangle;\n","import React from 'react';\nimport { Vec } from './tools';\n\nexport interface MeasurementProps {\n  d: string;\n  label: string;\n  labelPos: Vec;\n  labelOpacity: number;\n}\n\nconst Measurement: React.FC<MeasurementProps> = props => {\n  const { d, label, labelPos, labelOpacity } = props;\n\n  return (\n    <g>\n      <path className=\"measurement-path\" d={d} />\n      <text\n        className=\"measurement-label\"\n        x={labelPos.x}\n        y={labelPos.y}\n        fillOpacity={labelOpacity}\n        textAnchor=\"middle\"\n        dominantBaseline=\"middle\"\n      >\n        {label}\n      </text>\n    </g>\n  );\n};\n\nexport default Measurement;\n","import React from 'react';\nimport * as L from './locations';\nimport { StepProps } from './index';\nimport { StateContext, RightTriangle } from '../state';\nimport { Anim, Extras as AnimExtras } from '../tools';\nimport ControlPoints from '../ControlPoints';\nimport MainTriangle from '../MainTriangle';\nimport Measurement from '../Measurement';\n\nconst Section: React.FC = () => {\n  return (\n    <section>\n      <h1>A Pythagorean Mosaic</h1>\n\n      <p>\n        The celebrated <em>Pythagorean Theorem</em> says that the relationship\n        between the lengths of the sides of any right triangle is astonishingly\n        simple: specifically, the square of the length of the longest side (the\n        &ldquo;hypotenuse&rdquo;) is equal to the sum of the squares of the\n        shorter sides. Following convention, if we call the length of the\n        hypotenuse <code>c</code>, and the lengths of the remaining sides{' '}\n        <code>a</code> and <code>b</code>, the Pythagorean Theorem states that{' '}\n        <code>\n          a<sup>2</sup> + b<sup>2</sup> = c<sup>2</sup>\n        </code>\n        .\n      </p>\n      <p>\n        How do we <em>know</em> that this is true? Perhaps we could (somehow)\n        check a large collection of right triangles to see if this is always the\n        case. Although such an effort might instill some confidence, it would be\n        far from definitive: we'd inevitably remain tormented by the nagging\n        thought that we'd missed some exotic conjecture-defying triangle.\n      </p>\n      <p>\n        We want something sturdier: a <em>proof</em>. In the remaining pages,\n        we'll step through a tidy demonstration of the Pythagorean Theorem.\n        Unlike the &ldquo;checking&rdquo; strategy described above, our proof\n        will appeal to universal properties of right triangles and other\n        geometric figures, rather than relying on the specific details of any\n        particular triangle.\n      </p>\n\n      <p>\n        We'll use the right triangle shown here to illustrate each step. Each of\n        the triangle's vertices (<span className=\"dummy-control-point\"></span>)\n        can be dragged at any time; this will allow us to observe each step with\n        a variety of different triangles.\n      </p>\n    </section>\n  );\n};\n\nconst Graphics: React.FC<StepProps> = ({ frame }) => {\n  const { state } = React.useContext(StateContext);\n\n  const controlPoints = React.useMemo(\n    () => animControlPoints(state.tri),\n    [state.tri]\n  );\n  const triangle = React.useMemo(() => animTriangle(state.tri), [state.tri]);\n  const measurements = React.useMemo(\n    () => animMeasurements(state.tri),\n    [state.tri]\n  );\n\n  const { rOpacity, hOpacity, vOpacity } = controlPoints.fn(frame);\n  const { d, opacity } = triangle.fn(frame);\n  const { dA, aOpacity, dB, bOpacity, dC, cOpacity } = measurements.fn(frame);\n\n  const aLabelPos = L.aMeasurementLabel(state.tri);\n  const bLabelPos = L.bMeasurementLabel(state.tri);\n  const cLabelPos = L.cMeasurementLabel(state.tri);\n\n  return (\n    <>\n      <Measurement\n        d={dA}\n        label=\"a\"\n        labelPos={aLabelPos}\n        labelOpacity={aOpacity}\n      />\n      <Measurement\n        d={dB}\n        label=\"b\"\n        labelPos={bLabelPos}\n        labelOpacity={bOpacity}\n      />\n      <Measurement\n        d={dC}\n        label=\"c\"\n        labelPos={cLabelPos}\n        labelOpacity={cOpacity}\n      />\n\n      <MainTriangle d={d} opacity={opacity} />\n      <ControlPoints\n        rOpacity={rOpacity}\n        hOpacity={hOpacity}\n        vOpacity={vOpacity}\n      />\n    </>\n  );\n};\n\nfunction animControlPoints(tri: RightTriangle): Anim<ControlPointsState> {\n  return Anim.Fork({\n    vOpacity: Anim.Ease(0, 0.5, 400),\n    rOpacity: Anim.Wait(0, 600).then(Anim.Ease(0, 0.5, 400)),\n    hOpacity: Anim.Wait(0, 1200).then(Anim.Ease(0, 0.5, 400)),\n  });\n}\n\ninterface ControlPointsState {\n  rOpacity: number;\n  hOpacity: number;\n  vOpacity: number;\n}\n\nfunction animTriangle(tri: RightTriangle): Anim<TriangleState> {\n  const { r, h, v } = tri;\n\n  return Anim.Fork({\n    d: AnimExtras.SvgPath([v, r, h], 1800),\n    opacity: Anim.Wait(0, 2400).then(Anim.Ease(0, 1, 500)),\n  });\n}\n\ninterface TriangleState {\n  d: string;\n  opacity: number;\n}\n\nfunction animMeasurements(tri: RightTriangle): Anim<MeasurementsState> {\n  return Anim.Fork({\n    dA: Anim.Wait('', 3000).then(\n      AnimExtras.Measurement(\n        L.aMeasurementStart(tri),\n        L.aMeasurementEnd(tri),\n        20,\n        1200\n      )\n    ),\n    aOpacity: Anim.Wait(0, 4200).then(Anim.Ease(0, 1, 800)),\n    dB: Anim.Wait('', 4600).then(\n      AnimExtras.Measurement(\n        L.bMeasurementStart(tri),\n        L.bMeasurementEnd(tri),\n        20,\n        1200\n      )\n    ),\n    bOpacity: Anim.Wait(0, 5800).then(Anim.Ease(0, 1, 800)),\n    dC: Anim.Wait('', 6200).then(\n      AnimExtras.Measurement(\n        L.cMeasurementStart(tri),\n        L.cMeasurementEnd(tri),\n        20,\n        1200\n      )\n    ),\n    cOpacity: Anim.Wait(0, 7400).then(Anim.Ease(0, 1, 800)),\n  });\n}\n\ninterface MeasurementsState {\n  dA: string;\n  aOpacity: number;\n  dB: string;\n  bOpacity: number;\n  dC: string;\n  cOpacity: number;\n}\n\nconst step = {\n  section: Section,\n  graphics: Graphics,\n  duration: 8200,\n};\n\nexport default step;\n","import React from 'react';\nimport { Vec } from './tools';\n\nexport interface PolygonProps {\n  pts?: Vec[];\n  className?: string;\n  d?: string;\n  opacity?: number;\n}\n\nconst Polygon: React.FC<PolygonProps> = props => {\n  const { pts = [], className, opacity = 1 } = props;\n\n  const d = props.d\n    ? props.d\n    : `M ${pts.map(pt => `${pt.x} ${pt.y}`).join(' L ')} Z`;\n\n  return <path className={className} d={d} fillOpacity={opacity} />;\n};\n\nexport default Polygon;\n","import React from 'react';\nimport { Vec } from './tools';\n\ninterface SquareLabelProps {\n  side: string;\n  pos: Vec;\n  opacity: number;\n}\n\nconst SquareLabel: React.FC<SquareLabelProps> = props => {\n  const { side, pos, opacity } = props;\n\n  return (\n    <text\n      className=\"main-square-label\"\n      x={pos.x}\n      y={pos.y}\n      fillOpacity={opacity}\n      textAnchor=\"middle\"\n      dominantBaseline=\"middle\"\n    >\n      {side}\n      <tspan className=\"main-square-label-exponent\" dy=\"-1ex\">\n        2\n      </tspan>\n    </text>\n  );\n};\n\nexport default SquareLabel;\n","import React from 'react';\nimport * as L from './locations';\nimport { StepProps } from './index';\nimport { StateContext, RightTriangle } from '../state';\nimport { Anim, Extras as AnimExtras } from '../tools';\nimport ControlPoints from '../ControlPoints';\nimport MainTriangle from '../MainTriangle';\nimport Polygon from '../Polygon';\nimport Measurement from '../Measurement';\n\nconst Section: React.FC = () => {\n  return (\n    <section>\n      <h2>Computing Areas (1)</h2>\n\n      <p>\n        What are the areas of these auxiliary rectangles? We can see that the\n        one containing the two smaller squares has a side length of{' '}\n        <code>a + b</code>. So it is indeed a square (as we suspected) with an\n        area of{' '}\n        <code>\n          (a + b)<sup>2</sup>\n        </code>\n        .\n      </p>\n    </section>\n  );\n};\n\nconst Graphics: React.FC<StepProps> = ({ frame }) => {\n  const { state } = React.useContext(StateContext);\n\n  const measurements = React.useMemo(\n    () => animMeasurements(state.tri),\n    [state.tri]\n  );\n\n  const { dA1, a1Opacity, dB1, b1Opacity, dA2, a2Opacity, dB2, b2Opacity } =\n    measurements.fn(frame);\n  const aLabel1Pos = L.aSquareMeasurement1Label(state.tri);\n  const bLabel1Pos = L.bSquareMeasurement1Label(state.tri);\n  const aLabel2Pos = L.aSquareMeasurement2Label(state.tri);\n  const bLabel2Pos = L.bSquareMeasurement2Label(state.tri);\n\n  return (\n    <>\n      <Polygon className=\"main-square\" pts={L.aSquare(state.tri)} />\n      <Polygon className=\"main-square\" pts={L.bSquare(state.tri)} />\n      <Polygon className=\"main-square dim\" pts={L.cSquare(state.tri)} />\n      <MainTriangle />\n      <Polygon\n        className=\"aux-square\"\n        pts={L.abAuxSquare(state.tri)}\n        opacity={0}\n      />\n\n      <Measurement\n        d={dA1}\n        label=\"a\"\n        labelPos={aLabel1Pos}\n        labelOpacity={a1Opacity}\n      />\n      <Measurement\n        d={dB1}\n        label=\"b\"\n        labelPos={bLabel1Pos}\n        labelOpacity={b1Opacity}\n      />\n      <Measurement\n        d={dA2}\n        label=\"a\"\n        labelPos={aLabel2Pos}\n        labelOpacity={a2Opacity}\n      />\n      <Measurement\n        d={dB2}\n        label=\"b\"\n        labelPos={bLabel2Pos}\n        labelOpacity={b2Opacity}\n      />\n\n      <ControlPoints />\n    </>\n  );\n};\n\nfunction animMeasurements(tri: RightTriangle): Anim<MeasurementsState> {\n  return Anim.Fork({\n    dA1: AnimExtras.Measurement(\n      L.aSquareMeasurement1Start(tri),\n      L.aSquareMeasurement1End(tri),\n      20,\n      1200\n    ),\n    a1Opacity: Anim.Wait(0, 1200).then(Anim.Ease(0, 1, 800)),\n    dB1: Anim.Wait('', 1600).then(\n      AnimExtras.Measurement(\n        L.bSquareMeasurement1Start(tri),\n        L.bSquareMeasurement1End(tri),\n        20,\n        1200\n      )\n    ),\n    b1Opacity: Anim.Wait(0, 2800).then(Anim.Ease(0, 1, 800)),\n    dA2: AnimExtras.Measurement(\n      L.aSquareMeasurement2Start(tri),\n      L.aSquareMeasurement2End(tri),\n      20,\n      1200\n    ),\n    a2Opacity: Anim.Wait(0, 1200).then(Anim.Ease(0, 1, 800)),\n    dB2: Anim.Wait('', 1600).then(\n      AnimExtras.Measurement(\n        L.bSquareMeasurement2Start(tri),\n        L.bSquareMeasurement2End(tri),\n        20,\n        1200\n      )\n    ),\n    b2Opacity: Anim.Wait(0, 2800).then(Anim.Ease(0, 1, 800)),\n  });\n}\n\ninterface MeasurementsState {\n  dA1: string;\n  a1Opacity: number;\n  dB1: string;\n  b1Opacity: number;\n  dA2: string;\n  a2Opacity: number;\n  dB2: string;\n  b2Opacity: number;\n}\n\nconst step = {\n  section: Section,\n  graphics: Graphics,\n  duration: 3400,\n};\n\nexport default step;\n","import React from 'react';\nimport { Vec, Pose } from './tools';\n\nexport interface PosedPolygonProps {\n  // These are the coordinates of the polygon's points in _object space_\n  pts: Vec[];\n  // This is the location and orientation of the polygon in _world space_\n  pose: Pose;\n  opacity?: number;\n  className?: string;\n}\n\nconst PosedPolygon: React.FC<PosedPolygonProps> = props => {\n  const { pose, opacity = 1, className } = props;\n\n  const pts = props.pts.map(pt => pt.rotate(pose.angle).plus(pose.loc));\n  const d = `M ${pts.map(pt => `${pt.x} ${pt.y}`).join(' L ')} Z`;\n\n  return <path className={className} d={d} fillOpacity={opacity} />;\n};\n\nexport default PosedPolygon;\n","import React from 'react';\nimport * as L from './locations';\nimport { StepProps } from './index';\nimport { StateContext, RightTriangle } from '../state';\nimport { Anim, Pose, Extras as AnimExtras } from '../tools';\nimport ControlPoints from '../ControlPoints';\nimport MainTriangle from '../MainTriangle';\nimport Polygon from '../Polygon';\nimport PosedPolygon from '../PosedPolygon';\nimport Measurement from '../Measurement';\n\nconst Section: React.FC = () => {\n  return (\n    <section>\n      <h2>Computing Areas (2)</h2>\n\n      <p>\n        The area of the second auxiliar rectangle is a bit trickier to compute.\n        However, once we see that our original right triangle appears\n        &ldquo;copied&rdquo; inside of it, it's clear that its sides have length{' '}\n        <code>a + b</code> as well. Accordingly, it is <em>also</em> a square\n        with area{' '}\n        <code>\n          (a + b)<sup>2</sup>\n        </code>\n        .\n      </p>\n\n      <p>\n        This confirms what we first suspected several steps back, namely that\n        both auxiliary rectangles have <em>the same area</em>.\n      </p>\n    </section>\n  );\n};\n\nconst Graphics: React.FC<StepProps> = ({ frame }) => {\n  const { state } = React.useContext(StateContext);\n\n  const triCopies = React.useMemo(() => animTriCopies(state.tri), [state.tri]);\n  const measurements = React.useMemo(\n    () => animMeasurements(state.tri),\n    [state.tri]\n  );\n\n  const {\n    tri1Pose,\n    tri1Opacity,\n    tri2Pose,\n    tri2Opacity,\n    tri3Pose,\n    tri3Opacity,\n  } = triCopies.fn(frame);\n  const triPts = L.triCopyPts(state.tri);\n\n  const { dA1, a1Opacity, dB1, b1Opacity, dA2, a2Opacity, dB2, b2Opacity } =\n    measurements.fn(frame);\n  const aLabel1Pos = L.cSquareMeasurementA1Label(state.tri);\n  const bLabel1Pos = L.cSquareMeasurementB1Label(state.tri);\n  const aLabel2Pos = L.cSquareMeasurementA2Label(state.tri);\n  const bLabel2Pos = L.cSquareMeasurementB2Label(state.tri);\n\n  return (\n    <>\n      <Polygon className=\"main-square dim\" pts={L.aSquare(state.tri)} />\n      <Polygon className=\"main-square dim\" pts={L.bSquare(state.tri)} />\n      <Polygon className=\"main-square\" pts={L.cSquare(state.tri)} />\n      <MainTriangle />\n\n      <PosedPolygon\n        className=\"main-triangle-copy\"\n        pts={triPts}\n        pose={tri1Pose}\n        opacity={tri1Opacity}\n      />\n      <PosedPolygon\n        className=\"main-triangle-copy\"\n        pts={triPts}\n        pose={tri2Pose}\n        opacity={tri2Opacity}\n      />\n      <PosedPolygon\n        className=\"main-triangle-copy\"\n        pts={triPts}\n        pose={tri3Pose}\n        opacity={tri3Opacity}\n      />\n\n      <Measurement\n        d={dA1}\n        label=\"a\"\n        labelPos={aLabel1Pos}\n        labelOpacity={a1Opacity}\n      />\n      <Measurement\n        d={dB1}\n        label=\"b\"\n        labelPos={bLabel1Pos}\n        labelOpacity={b1Opacity}\n      />\n      <Measurement\n        d={dA2}\n        label=\"a\"\n        labelPos={aLabel2Pos}\n        labelOpacity={a2Opacity}\n      />\n      <Measurement\n        d={dB2}\n        label=\"b\"\n        labelPos={bLabel2Pos}\n        labelOpacity={b2Opacity}\n      />\n\n      <Polygon\n        className=\"aux-square\"\n        pts={L.cAuxSquare(state.tri)}\n        opacity={0}\n      />\n      <ControlPoints />\n    </>\n  );\n};\n\nfunction animTriCopies(tri: RightTriangle): Anim<TriCopiesState> {\n  const initPose = L.initTriPose(tri);\n  const copy1Pose = L.triCopyC1Pose(tri);\n  const copy2Pose = L.triCopyC2Pose(tri);\n  const copy3Pose = L.triCopyC3Pose(tri);\n\n  return Anim.Fork({\n    tri1Pose: Anim.Ease(initPose, copy1Pose, 1200),\n    tri1Opacity: Anim.Ease(0, 1, 400),\n    tri2Pose: Anim.Wait(copy1Pose, 1200).then(\n      Anim.Ease(copy1Pose, copy2Pose, 1200)\n    ),\n    tri2Opacity: Anim.Wait(0, 1200).then(Anim.Ease(0, 1, 400)),\n    tri3Pose: Anim.Wait(copy2Pose, 2400).then(\n      Anim.Ease(copy2Pose, copy3Pose, 1200)\n    ),\n    tri3Opacity: Anim.Wait(0, 2400).then(Anim.Ease(0, 1, 400)),\n  });\n}\n\ninterface TriCopiesState {\n  tri1Pose: Pose;\n  tri1Opacity: number;\n  tri2Pose: Pose;\n  tri2Opacity: number;\n  tri3Pose: Pose;\n  tri3Opacity: number;\n}\n\nfunction animMeasurements(tri: RightTriangle): Anim<MeasurementsState> {\n  return Anim.Fork({\n    dA1: Anim.Wait('', 4000).then(\n      AnimExtras.Measurement(\n        L.cSquareMeasurementA1Start(tri),\n        L.cSquareMeasurementA1End(tri),\n        20,\n        1200\n      )\n    ),\n    a1Opacity: Anim.Wait(0, 5200).then(Anim.Ease(0, 1, 800)),\n    dB1: Anim.Wait('', 5600).then(\n      AnimExtras.Measurement(\n        L.cSquareMeasurementB1Start(tri),\n        L.cSquareMeasurementB1End(tri),\n        20,\n        1200\n      )\n    ),\n    b1Opacity: Anim.Wait(0, 6800).then(Anim.Ease(0, 1, 800)),\n    dA2: Anim.Wait('', 4000).then(\n      AnimExtras.Measurement(\n        L.cSquareMeasurementA2Start(tri),\n        L.cSquareMeasurementA2End(tri),\n        20,\n        1200\n      )\n    ),\n    a2Opacity: Anim.Wait(0, 5200).then(Anim.Ease(0, 1, 800)),\n    dB2: Anim.Wait('', 5600).then(\n      AnimExtras.Measurement(\n        L.cSquareMeasurementB2Start(tri),\n        L.cSquareMeasurementB2End(tri),\n        20,\n        1200\n      )\n    ),\n    b2Opacity: Anim.Wait(0, 6800).then(Anim.Ease(0, 1, 800)),\n  });\n}\n\ninterface MeasurementsState {\n  dA1: string;\n  a1Opacity: number;\n  dB1: string;\n  b1Opacity: number;\n  dA2: string;\n  a2Opacity: number;\n  dB2: string;\n  b2Opacity: number;\n}\n\nconst step = {\n  section: Section,\n  graphics: Graphics,\n  duration: 7600,\n};\n\nexport default step;\n","import React from 'react';\nimport { Vec } from './tools';\n\ninterface LabelProps {\n  name: string;\n  pos: Vec;\n  opacity: number;\n  className?: string;\n}\n\nconst Label: React.FC<LabelProps> = props => {\n  const { name, pos, opacity, className } = props;\n  return (\n    <text\n      className={className}\n      x={pos.x}\n      y={pos.y}\n      fillOpacity={opacity}\n      textAnchor=\"middle\"\n      dominantBaseline=\"middle\"\n    >\n      {name}\n    </text>\n  );\n};\n\nexport default Label;\n","import React from 'react';\nimport * as L from './locations';\nimport { StepProps } from './index';\nimport { StateContext, RightTriangle } from '../state';\nimport { Anim, Extras as AnimExtras } from '../tools';\nimport ControlPoints from '../ControlPoints';\nimport MainTriangle from '../MainTriangle';\nimport Polygon from '../Polygon';\n\nconst Section: React.FC = () => {\n  return (\n    <section>\n      <h2>Epilogue: Is this a proof?</h2>\n\n      <p>\n        In what sense have we <em>proven</em> that{' '}\n        <code>\n          a<sup>2</sup> + b<sup>2</sup> = c<sup>2</sup>\n        </code>{' '}\n        ?\n      </p>\n\n      <h3>Notes</h3>\n\n      <p>\n        I first saw this proof in Paul Lockhart's book <em>Measurement</em>.\n        There are simpler mosaic-style proofs of the Pythagorean Theorem, but I\n        enjoy the way Lockhart assembled this one.\n      </p>\n\n      <p>\n        This webpage is written in React (using TypeScript), and I created the\n        animations using a small collection of combinators along with a\n        special-purpose hook. For more information, see the{' '}\n        <a\n          href=\"https://github.com/wjlewis/pymos\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          source\n        </a>\n        .\n      </p>\n    </section>\n  );\n};\n\nconst Graphics: React.FC<StepProps> = ({ frame }) => {\n  const { state } = React.useContext(StateContext);\n\n  const angles = React.useMemo(() => animAngles(state.tri), [state.tri]);\n\n  const {\n    anglePath,\n    angleMeasure1APath,\n    angleMeasure1BPath,\n    angleMeasure2Path,\n    angleMeasure3APath,\n    angleMeasure3BPath,\n    angleMeasure4Path,\n  } = angles.fn(frame);\n\n  return (\n    <>\n      <Polygon className=\"main-square dim \" pts={L.aSquare(state.tri)} />\n      <Polygon className=\"main-square dim \" pts={L.bSquare(state.tri)} />\n      <Polygon className=\"main-square\" pts={L.cSquare(state.tri)} />\n\n      <MainTriangle />\n\n      <path className=\"angle-measure inside\" d={angleMeasure1APath} />\n      <path className=\"angle-measure inside\" d={angleMeasure1BPath} />\n\n      <path className=\"angle-measure inside\" d={angleMeasure2Path} />\n\n      <path className=\"angle-measure\" d={angleMeasure3APath} />\n      <path className=\"angle-measure\" d={angleMeasure3BPath} />\n\n      <path className=\"angle-measure\" d={angleMeasure4Path} />\n\n      <Polygon className=\"angle-path\" d={anglePath} opacity={0} />\n\n      <Polygon\n        className=\"aux-square\"\n        pts={L.cAuxSquare(state.tri)}\n        opacity={0}\n      />\n\n      <ControlPoints />\n    </>\n  );\n};\n\nfunction animAngles(tri: RightTriangle): Anim<AnimAnglesState> {\n  const angleMeasure1R = L.hr(tri).length() / 2;\n  const angleMeasure2R = L.vr(tri).length() / 2;\n\n  return Anim.Fork({\n    anglePath: AnimExtras.SvgPath([tri.h, tri.v, L.c1(tri)], 1200, false),\n    angleMeasure1APath: Anim.Wait('', 300).then(\n      AnimExtras.SvgArc(tri.h, L.hv(tri), L.hr(tri), angleMeasure1R, 500)\n    ),\n    angleMeasure1BPath: Anim.Wait('', 300).then(\n      AnimExtras.SvgArc(tri.h, L.hv(tri), L.hr(tri), angleMeasure1R - 6, 500)\n    ),\n    angleMeasure2Path: Anim.Wait('', 600).then(\n      AnimExtras.SvgArc(tri.v, L.vh(tri), L.vr(tri), angleMeasure2R, 500)\n    ),\n    angleMeasure3APath: Anim.Wait('', 1000).then(\n      AnimExtras.SvgArc(tri.v, L.vC1(tri), L.vCAuxV(tri), angleMeasure1R, 500)\n    ),\n    angleMeasure3BPath: Anim.Wait('', 1000).then(\n      AnimExtras.SvgArc(\n        tri.v,\n        L.vC1(tri),\n        L.vCAuxV(tri),\n        angleMeasure1R - 6,\n        500\n      )\n    ),\n    angleMeasure4Path: Anim.Wait('', 1300).then(\n      AnimExtras.SvgArc(\n        L.c1(tri),\n        L.c1V(tri),\n        L.c1CAuxV(tri),\n        angleMeasure2R,\n        500\n      )\n    ),\n  });\n}\n\ninterface AnimAnglesState {\n  anglePath: string;\n  angleMeasure1APath: string;\n  angleMeasure1BPath: string;\n  angleMeasure2Path: string;\n  angleMeasure3APath: string;\n  angleMeasure3BPath: string;\n  angleMeasure4Path: string;\n}\n\nconst step = {\n  section: Section,\n  graphics: Graphics,\n  duration: 1800,\n};\n\nexport default step;\n","import step1 from './step1';\nimport step2 from './step2';\nimport step3 from './step3';\nimport step4 from './step4';\nimport step5 from './step5';\nimport step6 from './step6';\nimport step7 from './step7';\nimport step8 from './step8';\n\nexport * as Locations from './locations';\n\nexport const steps: Step[] = [\n  step1,\n  step2,\n  step3,\n  step4,\n  step5,\n  step6,\n  step7,\n  step8,\n];\n\nexport interface Step {\n  section: React.FC;\n  graphics: React.FC<StepProps>;\n  duration: number;\n}\n\nexport interface StepProps {\n  frame: number;\n}\n","import React from 'react';\nimport * as L from './locations';\nimport { StepProps } from './index';\nimport { StateContext, RightTriangle, Actions as A } from '../state';\nimport { Anim, Extras as AnimExtras } from '../tools';\nimport ControlPoints from '../ControlPoints';\nimport MainTriangle from '../MainTriangle';\nimport Polygon from '../Polygon';\nimport SquareLabel from '../SquareLabel';\n\nconst Section: React.FC = () => {\n  const { dispatch } = React.useContext(StateContext);\n\n  function handleThin() {\n    return dispatch(A.makeThin());\n  }\n\n  function handleEven() {\n    return dispatch(A.makeEven());\n  }\n\n  return (\n    <section>\n      <h2>A Slight Reinterpretation</h2>\n\n      <p>\n        We'll begin by reinterpreting the statement{' '}\n        <code>\n          a<sup>2</sup> + b<sup>2</sup> = c<sup>2</sup>\n        </code>{' '}\n        ever so slightly. In particular, we've constructed squares using each of\n        the triangle's sides as a base. Since a square whose side length is{' '}\n        <code>s</code> has an area of{' '}\n        <code>\n          s<sup>2</sup>\n        </code>\n        , our new interpretation of the Pythagorean Theorem states that{' '}\n        <em>\n          the two smaller squares together have exactly the same area as the\n          larger square\n        </em>\n        .\n      </p>\n\n      <p>This is what we'll demonstrate in the steps to come.</p>\n\n      <p>\n        Is this reasonable? When the triangle is thin, as in this{' '}\n        <button onClick={handleThin}>example</button>, the{' '}\n        <code>&ldquo;a&rdquo;</code> square is quite small, whereas the{' '}\n        <code>&ldquo;b&rdquo;</code> square is just slightly smaller than the{' '}\n        <code>&ldquo;c&rdquo;</code> square. As the triangle becomes thinner and\n        thinner (try it out!), this behavior is accentuated. For this reason,\n        the proposal seems plausible, at least for thin triangles. However, when\n        the triangle's sides are{' '}\n        <button onClick={handleEven}>roughly even</button>, it may be more\n        difficult to tell whether the total area of the smaller squares equals\n        that of the larger square.\n      </p>\n    </section>\n  );\n};\n\nconst Graphics: React.FC<StepProps> = ({ frame }) => {\n  const { state } = React.useContext(StateContext);\n\n  const squares = React.useMemo(() => animSquares(state.tri), [state.tri]);\n  const labels = React.useMemo(() => animLabels(state.tri), [state.tri]);\n\n  const { dA, aOpacity, dB, bOpacity, dC, cOpacity } = squares.fn(frame);\n  const { aLabelOpacity, bLabelOpacity, cLabelOpacity } = labels.fn(frame);\n\n  const aLabelPos = L.aSquareLabel(state.tri);\n  const bLabelPos = L.bSquareLabel(state.tri);\n  const cLabelPos = L.cSquareLabel(state.tri);\n\n  return (\n    <>\n      <Polygon className=\"main-square\" d={dA} opacity={aOpacity} />\n      <Polygon className=\"main-square\" d={dB} opacity={bOpacity} />\n      <Polygon className=\"main-square\" d={dC} opacity={cOpacity} />\n      <SquareLabel side=\"a\" pos={aLabelPos} opacity={aLabelOpacity} />\n      <SquareLabel side=\"b\" pos={bLabelPos} opacity={bLabelOpacity} />\n      <SquareLabel side=\"c\" pos={cLabelPos} opacity={cLabelOpacity} />\n      <MainTriangle />\n      <ControlPoints />\n    </>\n  );\n};\n\nfunction animSquares(tri: RightTriangle): Anim<SquaresState> {\n  return Anim.Fork({\n    dA: AnimExtras.SvgPath(L.aSquare(tri), 1600),\n    aOpacity: Anim.Wait(0, 1600).then(Anim.Ease(0, 1, 600)),\n    dB: AnimExtras.SvgPath(L.bSquare(tri), 1600),\n    bOpacity: Anim.Wait(0, 1600).then(Anim.Ease(0, 1, 600)),\n    dC: AnimExtras.SvgPath(L.cSquare(tri), 1600),\n    cOpacity: Anim.Wait(0, 1600).then(Anim.Ease(0, 1, 600)),\n  });\n}\n\ninterface SquaresState {\n  dA: string;\n  aOpacity: number;\n  dB: string;\n  bOpacity: number;\n  dC: string;\n  cOpacity: number;\n}\n\nfunction animLabels(tri: RightTriangle): Anim<LabelsState> {\n  return Anim.Fork({\n    aLabelOpacity: Anim.Wait(0, 2400).then(Anim.Ease(0, 1, 600)),\n    bLabelOpacity: Anim.Wait(0, 3000).then(Anim.Ease(0, 1, 600)),\n    cLabelOpacity: Anim.Wait(0, 3600).then(Anim.Ease(0, 1, 600)),\n  });\n}\n\ninterface LabelsState {\n  aLabelOpacity: number;\n  bLabelOpacity: number;\n  cLabelOpacity: number;\n}\n\nconst step = {\n  section: Section,\n  graphics: Graphics,\n  duration: 4200,\n};\n\nexport default step;\n","import React from 'react';\nimport * as L from './locations';\nimport { StepProps } from './index';\nimport { StateContext, RightTriangle } from '../state';\nimport { Anim, Extras as AnimExtras } from '../tools';\nimport ControlPoints from '../ControlPoints';\nimport MainTriangle from '../MainTriangle';\nimport Polygon from '../Polygon';\n\nconst Section: React.FC = () => {\n  return (\n    <section>\n      <h2>Some Auxiliary Elements</h2>\n\n      <p>\n        To start, we construct two larger rectangles around our original right\n        triangle: one containing the <code>&ldquo;c&rdquo;</code> square, and\n        the other containing the two smaller squares.\n      </p>\n\n      <p>\n        Curiously enough, both of these &ldquo;auxiliary&rdquo; rectangles\n        appear to be squares. Furthermore, no matter our triangle's proportions,\n        both appear to have the same area. Is this the case? If so, can you see\n        why? We'll look at these questions next.\n      </p>\n    </section>\n  );\n};\n\nconst Graphics: React.FC<StepProps> = ({ frame }) => {\n  const { state } = React.useContext(StateContext);\n\n  const auxSquares = React.useMemo(\n    () => animAuxSquares(state.tri),\n    [state.tri]\n  );\n\n  const { abPath, cPath } = auxSquares.fn(frame);\n\n  return (\n    <>\n      <Polygon className=\"main-square\" pts={L.aSquare(state.tri)} />\n      <Polygon className=\"main-square\" pts={L.bSquare(state.tri)} />\n      <Polygon className=\"main-square\" pts={L.cSquare(state.tri)} />\n      <MainTriangle />\n      <Polygon className=\"aux-square\" d={abPath} opacity={0} />\n      <Polygon className=\"aux-square\" d={cPath} opacity={0} />\n      <ControlPoints />\n    </>\n  );\n};\n\nfunction animAuxSquares(tri: RightTriangle): Anim<AuxSquaresState> {\n  return Anim.Fork({\n    abPath: AnimExtras.SvgPath(L.abAuxSquare(tri), 1600),\n    cPath: Anim.Wait('', 1600).then(\n      AnimExtras.SvgPath(L.cAuxSquare(tri), 1600)\n    ),\n  });\n}\n\ninterface AuxSquaresState {\n  abPath: string;\n  cPath: string;\n}\n\nconst step = {\n  section: Section,\n  graphics: Graphics,\n  duration: 3200,\n};\n\nexport default step;\n","import React from 'react';\nimport * as L from './locations';\nimport { StepProps } from './index';\nimport { StateContext, RightTriangle } from '../state';\nimport { Anim } from '../tools';\nimport ControlPoints from '../ControlPoints';\nimport MainTriangle from '../MainTriangle';\nimport Polygon from '../Polygon';\nimport PosedPolygon from '../PosedPolygon';\nimport SquareLabel from '../SquareLabel';\nimport Label from '../Label';\n\nconst Section: React.FC = () => {\n  return (\n    <section>\n      <h2>Considering the Leftovers (1)</h2>\n\n      <p>\n        We've just seen that the second auxiliary square contains 4 copies of\n        the original right triangle. Its remaining area is occupied by the\n        square whose area is{' '}\n        <code>\n          c<sup>2</sup>\n        </code>\n        . In other words,{' '}\n        <code>\n          c<sup>2</sup>\n        </code>{' '}\n        is the total area left over after removing 4 right triangles from the\n        auxiliary square.\n      </p>\n\n      <p>\n        If we call the area of the auxiliary square <code>S</code>, and the area\n        of our original right triangle <code>T</code>, we can express this\n        relationship symbolically as{' '}\n        <code>\n          c<sup>2</sup> = S - 4T\n        </code>\n        .\n      </p>\n    </section>\n  );\n};\n\nconst Graphics: React.FC<StepProps> = ({ frame }) => {\n  const { state } = React.useContext(StateContext);\n\n  const opacity = React.useMemo(() => animOpacity(state.tri), [state.tri]);\n\n  const {\n    c2LabelOpacity,\n    auxOpacity,\n    auxLabelOpacity,\n    mainTriOpacity,\n    mainTriLabelOpacity,\n    tri1Opacity,\n    tri1LabelOpacity,\n    tri2Opacity,\n    tri2LabelOpacity,\n    tri3Opacity,\n    tri3LabelOpacity,\n  } = opacity.fn(frame);\n  const triPts = L.triCopyPts(state.tri);\n\n  return (\n    <>\n      <Polygon className=\"main-square dim\" pts={L.aSquare(state.tri)} />\n      <Polygon className=\"main-square dim\" pts={L.bSquare(state.tri)} />\n      <Polygon className=\"main-square\" pts={L.cSquare(state.tri)} />\n\n      <Polygon\n        className=\"aux-square\"\n        pts={L.cAuxSquare(state.tri)}\n        opacity={auxOpacity}\n      />\n      <Label\n        className=\"aux-square-label\"\n        name=\"S\"\n        pos={L.cSquareLabel(state.tri)}\n        opacity={auxLabelOpacity}\n      />\n      <SquareLabel\n        side=\"c\"\n        pos={L.cSquareLabel(state.tri)}\n        opacity={c2LabelOpacity}\n      />\n\n      <PosedPolygon\n        className=\"main-triangle-copy\"\n        pts={triPts}\n        pose={L.triCopyC1Pose(state.tri)}\n        opacity={tri1Opacity}\n      />\n      <PosedPolygon\n        className=\"main-triangle-copy\"\n        pts={triPts}\n        pose={L.triCopyC2Pose(state.tri)}\n        opacity={tri2Opacity}\n      />\n      <PosedPolygon\n        className=\"main-triangle-copy\"\n        pts={triPts}\n        pose={L.triCopyC3Pose(state.tri)}\n        opacity={tri3Opacity}\n      />\n      <MainTriangle opacity={mainTriOpacity} strokeOpacity={mainTriOpacity} />\n      <Label\n        className=\"tri-label\"\n        name=\"T\"\n        pos={L.mainTriLabel(state.tri)}\n        opacity={mainTriLabelOpacity}\n      />\n      <Label\n        className=\"tri-label\"\n        name=\"T\"\n        pos={L.triCopyC1Label(state.tri)}\n        opacity={tri1LabelOpacity}\n      />\n      <Label\n        className=\"tri-label\"\n        name=\"T\"\n        pos={L.triCopyC2Label(state.tri)}\n        opacity={tri2LabelOpacity}\n      />\n      <Label\n        className=\"tri-label\"\n        name=\"T\"\n        pos={L.triCopyC3Label(state.tri)}\n        opacity={tri3LabelOpacity}\n      />\n\n      <ControlPoints />\n    </>\n  );\n};\n\nfunction animOpacity(tri: RightTriangle): Anim<OpacityState> {\n  return Anim.Fork({\n    c2LabelOpacity: Anim.Wait(0, 4000).then(Anim.Ease(0, 1, 800)),\n\n    auxOpacity: Anim.Wait(1, 3400).then(Anim.Ease(1, 0, 800)),\n    auxLabelOpacity: Anim.Ease(0, 1, 800)\n      .then(Anim.Wait(1, 2800))\n      .then(Anim.Ease(1, 0, 800)),\n\n    mainTriOpacity: Anim.Wait(0, 1000)\n      .then(Anim.Ease(0, 1, 800))\n      .then(Anim.Wait(1, 4600))\n      .then(Anim.Ease(1, 0, 800)),\n    mainTriLabelOpacity: Anim.Wait(0, 4000)\n      .then(Anim.Ease(0, 1, 800))\n      .then(Anim.Wait(1, 1900))\n      .then(Anim.Ease(1, 0, 800)),\n\n    tri1Opacity: Anim.Wait(0, 1500)\n      .then(Anim.Ease(0, 1, 800))\n      .then(Anim.Wait(1, 4600))\n      .then(Anim.Ease(1, 0, 800)),\n    tri1LabelOpacity: Anim.Wait(0, 4000)\n      .then(Anim.Ease(0, 1, 800))\n      .then(Anim.Wait(1, 2400))\n      .then(Anim.Ease(1, 0, 800)),\n\n    tri2Opacity: Anim.Wait(0, 2000)\n      .then(Anim.Ease(0, 1, 800))\n      .then(Anim.Wait(1, 4600))\n      .then(Anim.Ease(1, 0, 800)),\n    tri2LabelOpacity: Anim.Wait(0, 4000)\n      .then(Anim.Ease(0, 1, 800))\n      .then(Anim.Wait(1, 2900))\n      .then(Anim.Ease(1, 0, 800)),\n\n    tri3Opacity: Anim.Wait(0, 2500)\n      .then(Anim.Ease(0, 1, 800))\n      .then(Anim.Wait(1, 4600))\n      .then(Anim.Ease(1, 0, 800)),\n    tri3LabelOpacity: Anim.Wait(0, 4000)\n      .then(Anim.Ease(0, 1, 800))\n      .then(Anim.Wait(1, 3400))\n      .then(Anim.Ease(1, 0, 800)),\n  });\n}\n\ninterface OpacityState {\n  c2LabelOpacity: number;\n  auxOpacity: number;\n  auxLabelOpacity: number;\n  mainTriOpacity: number;\n  mainTriLabelOpacity: number;\n  tri1Opacity: number;\n  tri1LabelOpacity: number;\n  tri2Opacity: number;\n  tri2LabelOpacity: number;\n  tri3Opacity: number;\n  tri3LabelOpacity: number;\n}\n\nconst step = {\n  section: Section,\n  graphics: Graphics,\n  duration: 10000,\n};\n\nexport default step;\n","import React from 'react';\nimport * as L from './locations';\nimport { StepProps } from './index';\nimport { StateContext, RightTriangle } from '../state';\nimport { Anim, Pose } from '../tools';\nimport ControlPoints from '../ControlPoints';\nimport MainTriangle from '../MainTriangle';\nimport Polygon from '../Polygon';\nimport PosedPolygon from '../PosedPolygon';\nimport SquareLabel from '../SquareLabel';\nimport Label from '../Label';\n\nconst Section: React.FC = () => {\n  return (\n    <section>\n      <h2>Considering the Leftovers (2)</h2>\n\n      <p>\n        The other auxiliary square has a similar property. In particular, it\n        contains 4 copies of the original triangle, and its remaining area is\n        occupied by the squares whose areas are{' '}\n        <code>\n          a<sup>2</sup>\n        </code>{' '}\n        and{' '}\n        <code>\n          b<sup>2</sup>\n        </code>\n        . In other words,{' '}\n        <code>\n          a<sup>2</sup> + b<sup>2</sup>\n        </code>{' '}\n        is the total area left over after removing 4 right triangles from the\n        original auxiliary square.\n      </p>\n\n      <p>\n        Using the names we devised in the previous step (and recalling that both\n        auxiliary squares have the same area), we can express this discovery\n        like so:{' '}\n        <code>\n          a<sup>2</sup> + b<sup>2</sup> = S - 4T\n        </code>\n        .\n      </p>\n\n      <p>\n        This looks familiar! We determined in the previous step that{' '}\n        <code>\n          c<sup>2</sup> = S - 4T\n        </code>{' '}\n        as well. Since{' '}\n        <em>\n          two things that are equal to the same thing are equal to each other\n        </em>\n        , it must be the case that{' '}\n        <code>\n          a<sup>2</sup> + b<sup>2</sup> = c<sup>2</sup>\n        </code>\n        .\n      </p>\n    </section>\n  );\n};\n\nconst Graphics: React.FC<StepProps> = ({ frame }) => {\n  const { state } = React.useContext(StateContext);\n\n  const triCopies = React.useMemo(() => animTriCopies(state.tri), [state.tri]);\n\n  const {\n    tri1Pose,\n    tri1Opacity,\n    tri2Pose,\n    tri2Opacity,\n    tri3Pose,\n    tri3Opacity,\n    mainTriOpacity,\n    squareLabelOpacity,\n    triLabelOpacity,\n  } = triCopies.fn(frame);\n  const triPts = L.triCopyPts(state.tri);\n\n  return (\n    <>\n      <Polygon className=\"main-square\" pts={L.aSquare(state.tri)} />\n      <Polygon className=\"main-square\" pts={L.bSquare(state.tri)} />\n      <Polygon className=\"main-square dim\" pts={L.cSquare(state.tri)} />\n\n      <MainTriangle opacity={mainTriOpacity} strokeOpacity={mainTriOpacity} />\n      <PosedPolygon\n        className=\"main-triangle-copy\"\n        pts={triPts}\n        pose={tri1Pose}\n        opacity={tri1Opacity}\n      />\n      <PosedPolygon\n        className=\"main-triangle-copy\"\n        pts={triPts}\n        pose={tri2Pose}\n        opacity={tri2Opacity}\n      />\n      <PosedPolygon\n        className=\"main-triangle-copy\"\n        pts={triPts}\n        pose={tri3Pose}\n        opacity={tri3Opacity}\n      />\n\n      <Polygon\n        className=\"aux-square\"\n        pts={L.abAuxSquare(state.tri)}\n        opacity={0}\n      />\n\n      <SquareLabel\n        side=\"a\"\n        pos={L.aSquareLabel(state.tri)}\n        opacity={squareLabelOpacity}\n      />\n      <SquareLabel\n        side=\"b\"\n        pos={L.bSquareLabel(state.tri)}\n        opacity={squareLabelOpacity}\n      />\n      <Label\n        className=\"tri-label\"\n        name=\"T\"\n        pos={L.mainTriLabel(state.tri)}\n        opacity={triLabelOpacity}\n      />\n      <Label\n        className=\"tri-label\"\n        name=\"T\"\n        pos={L.triCopyAB1Label(state.tri)}\n        opacity={triLabelOpacity}\n      />\n      <Label\n        className=\"tri-label\"\n        name=\"T\"\n        pos={L.triCopyAB2Label(state.tri)}\n        opacity={triLabelOpacity}\n      />\n      <Label\n        className=\"tri-label\"\n        name=\"T\"\n        pos={L.triCopyAB3Label(state.tri)}\n        opacity={triLabelOpacity}\n      />\n\n      <ControlPoints />\n    </>\n  );\n};\n\nfunction animTriCopies(tri: RightTriangle): Anim<TriCopiesState> {\n  const initPose = L.initTriPose(tri);\n  const copy1Pose = L.triCopyAB1Pose(tri);\n  const copy2Pose = L.triCopyAB2Pose(tri);\n  const copy3Pose = L.triCopyAB3Pose(tri);\n\n  return Anim.Fork({\n    tri1Pose: Anim.Ease(initPose, copy1Pose, 1200),\n    tri1Opacity: Anim.Ease(0, 1, 400)\n      .then(Anim.Wait(1, 6000))\n      .then(Anim.Ease(1, 0, 1200)),\n    tri2Pose: Anim.Wait(copy1Pose, 1400).then(\n      Anim.Ease(copy1Pose, copy2Pose, 1200)\n    ),\n    tri2Opacity: Anim.Wait(0, 1200)\n      .then(Anim.Ease(0, 1, 400))\n      .then(Anim.Wait(1, 4800))\n      .then(Anim.Ease(1, 0, 1200)),\n    tri3Pose: Anim.Wait(copy2Pose, 2800).then(\n      Anim.Ease(copy2Pose, copy3Pose, 1200)\n    ),\n    tri3Opacity: Anim.Wait(0, 2800)\n      .then(Anim.Ease(0, 1, 400))\n      .then(Anim.Wait(1, 3200))\n      .then(Anim.Ease(1, 0, 1200)),\n    mainTriOpacity: Anim.Wait(1, 6400).then(Anim.Ease(1, 0, 1200)),\n\n    squareLabelOpacity: Anim.Wait(0, 4000).then(Anim.Ease(0, 1, 800)),\n    triLabelOpacity: Anim.Wait(0, 4000)\n      .then(Anim.Ease(0, 1, 800))\n      .then(Anim.Wait(1, 1600))\n      .then(Anim.Ease(1, 0, 1200)),\n  });\n}\n\ninterface TriCopiesState {\n  tri1Pose: Pose;\n  tri1Opacity: number;\n  tri2Pose: Pose;\n  tri2Opacity: number;\n  tri3Pose: Pose;\n  tri3Opacity: number;\n  mainTriOpacity: number;\n  squareLabelOpacity: number;\n  triLabelOpacity: number;\n}\n\nconst step = {\n  section: Section,\n  graphics: Graphics,\n  duration: 7600,\n};\n\nexport default step;\n","import { State, Dims, Device, Theme, initTri, smallInitTri } from './state';\nimport { Action, ActionType } from './actions';\nimport { steps } from '../steps';\nimport { DragSubject } from './DragSubject';\nimport { Vec, sign } from '../tools';\n\nexport function reducer(state: State, action: Action): State {\n  switch (action.type) {\n    case ActionType.PreviousStep:\n      return reducePreviousStep(state);\n    case ActionType.NextStep:\n      return reduceNextStep(state);\n    case ActionType.MouseDownRVertex:\n      return reduceMouseDownRVertex(state);\n    case ActionType.MouseDownHVertex:\n      return reduceMouseDownHVertex(state);\n    case ActionType.MouseDownVVertex:\n      return reduceMouseDownVVertex(state);\n    case ActionType.MouseMove:\n      return reduceMouseMove(state, action.payload);\n    case ActionType.MouseUp:\n      return reduceMouseUp(state);\n    case ActionType.MakeThin:\n      return reduceMakeThin(state);\n    case ActionType.MakeEven:\n      return reduceMakeEven(state);\n    case ActionType.UpdateDims:\n      return reduceUpdateDims(state, action.payload);\n    case ActionType.UpdateDevice:\n      return reduceUpdateDevice(state, action.payload);\n    case ActionType.ResetMainTriangle:\n      return reduceResetMainTriangle(state);\n    case ActionType.ToggleTheme:\n      return reduceToggleTheme(state);\n    default:\n      return state;\n  }\n}\n\nfunction reducePreviousStep(state: State): State {\n  return { ...state, stepIndex: Math.max(0, state.stepIndex - 1) };\n}\n\nfunction reduceNextStep(state: State): State {\n  return {\n    ...state,\n    stepIndex: Math.min(steps.length - 1, state.stepIndex + 1),\n  };\n}\n\nfunction reduceMouseDownRVertex(state: State): State {\n  const { r, h, v } = state.tri;\n  const hOffset = h.x - r.x;\n  const vOffset = v.y - r.y;\n\n  return { ...state, dragSubject: DragSubject.RVertex(hOffset, vOffset) };\n}\n\nfunction reduceMouseDownHVertex(state: State): State {\n  return { ...state, dragSubject: DragSubject.HVertex() };\n}\n\nfunction reduceMouseDownVVertex(state: State): State {\n  return { ...state, dragSubject: DragSubject.VVertex() };\n}\n\nfunction reduceMouseMove(state: State, mousePos: Vec): State {\n  return state.dragSubject.match({\n    none: () => state,\n    r: (hOffset, vOffset) => moveRVertex(state, hOffset, vOffset, mousePos),\n    h: () => moveHVertex(state, mousePos),\n    v: () => moveVVertex(state, mousePos),\n  });\n}\n\nfunction moveRVertex(\n  state: State,\n  hOffset: number,\n  vOffset: number,\n  mousePos: Vec\n): State {\n  const h = new Vec(mousePos.x + hOffset, mousePos.y);\n  const v = new Vec(mousePos.x, mousePos.y + vOffset);\n  return { ...state, tri: { r: mousePos, h, v } };\n}\n\nconst VERTEX_PADDING = 40;\n\nfunction moveHVertex(state: State, mousePos: Vec): State {\n  const { r, v } = state.tri;\n\n  const hX =\n    Math.abs(mousePos.x - r.x) < VERTEX_PADDING\n      ? r.x + VERTEX_PADDING * sign(mousePos.x - r.x)\n      : mousePos.x;\n  const hY =\n    Math.abs(mousePos.y - v.y) < VERTEX_PADDING\n      ? v.y + VERTEX_PADDING * sign(mousePos.y - v.y)\n      : mousePos.y;\n\n  const newH = new Vec(hX, hY);\n  const newR = new Vec(r.x, hY);\n\n  return { ...state, tri: { ...state.tri, r: newR, h: newH } };\n}\n\nfunction moveVVertex(state: State, mousePos: Vec): State {\n  const { r, h } = state.tri;\n\n  const vX =\n    Math.abs(mousePos.x - h.x) < VERTEX_PADDING\n      ? h.x + VERTEX_PADDING * sign(mousePos.x - h.x)\n      : mousePos.x;\n  const vY =\n    Math.abs(mousePos.y - r.y) < VERTEX_PADDING\n      ? r.y + VERTEX_PADDING * sign(mousePos.y - r.y)\n      : mousePos.y;\n\n  const newV = new Vec(vX, vY);\n  const newR = new Vec(vX, r.y);\n\n  return { ...state, tri: { ...state.tri, r: newR, v: newV } };\n}\n\nfunction reduceMouseUp(state: State): State {\n  const triOutOfBounds = isTriOutOfBounds(state, state.ui.dims);\n  return {\n    ...state,\n    ui: { ...state.ui, triOutOfBounds },\n    dragSubject: DragSubject.None(),\n  };\n}\n\nfunction reduceMakeThin(state: State): State {\n  if (state.ui.device === Device.Laptop) {\n    return makeThinLaptop(state);\n  } else {\n    return makeThinMobile(state);\n  }\n}\n\nfunction makeThinLaptop(state: State): State {\n  const r = new Vec(-80, 0);\n  const h = new Vec(80, r.y);\n  const v = new Vec(r.x, -VERTEX_PADDING);\n\n  return { ...state, tri: { ...state.tri, r, h, v } };\n}\n\nfunction makeThinMobile(state: State): State {\n  const r = new Vec(-60, 0);\n  const h = new Vec(60, r.y);\n  const v = new Vec(r.x, -VERTEX_PADDING);\n\n  return { ...state, tri: { ...state.tri, r, h, v } };\n}\n\nfunction reduceMakeEven(state: State): State {\n  if (state.ui.device === Device.Laptop) {\n    return makeEvenLaptop(state);\n  } else {\n    return makeEvenMobile(state);\n  }\n}\n\nfunction makeEvenLaptop(state: State): State {\n  const r = new Vec(0, 20);\n  // \"roughly\" even\n  const h = new Vec(90, r.y);\n  const v = new Vec(r.x, -80);\n\n  return { ...state, tri: { ...state.tri, r, h, v } };\n}\n\nfunction makeEvenMobile(state: State): State {\n  const r = new Vec(-25, 20);\n  // \"roughly\" even\n  const h = new Vec(25, r.y);\n  const v = new Vec(r.x, -20);\n\n  return { ...state, tri: { ...state.tri, r, h, v } };\n}\n\nfunction reduceUpdateDims(state: State, dims: Dims): State {\n  const triOutOfBounds = isTriOutOfBounds(state, dims);\n  return { ...state, ui: { ...state.ui, dims, triOutOfBounds } };\n}\n\nfunction reduceUpdateDevice(state: State, device: Device): State {\n  const currentDevice = state.ui.device;\n  const tri = laptopToMobile(currentDevice, device)\n    ? smallInitTri\n    : mobileToLaptop(currentDevice, device)\n    ? initTri\n    : state.tri;\n  return { ...state, tri, ui: { ...state.ui, device } };\n}\n\nfunction laptopToMobile(currentDevice: Device, newDevice: Device): boolean {\n  return currentDevice === Device.Laptop && newDevice === Device.Mobile;\n}\n\nfunction mobileToLaptop(currentDevice: Device, newDevice: Device): boolean {\n  return currentDevice === Device.Mobile && newDevice === Device.Laptop;\n}\n\nfunction reduceResetMainTriangle(state: State): State {\n  const tri = state.ui.device === Device.Laptop ? initTri : smallInitTri;\n\n  return { ...state, tri, ui: { ...state.ui, triOutOfBounds: false } };\n}\n\nfunction isTriOutOfBounds(state: State, dims: Dims): boolean {\n  const { r } = state.tri;\n  const { width, height } = dims;\n\n  const outX = Math.abs(r.x) > width / 2;\n  const outY = Math.abs(r.y) > height / 2;\n  return outX || outY;\n}\n\nfunction reduceToggleTheme(state: State): State {\n  const theme = state.ui.theme === Theme.Light ? Theme.Dark : Theme.Light;\n  return { ...state, ui: { ...state.ui, theme } };\n}\n","import { State, Dims, Theme } from './state';\nimport { StepProps, steps } from '../steps';\n\nexport function canGoPrevious(state: State): boolean {\n  return state.stepIndex > 0;\n}\n\nexport function canGoNext(state: State): boolean {\n  return state.stepIndex < steps.length - 1;\n}\n\nexport function stepProgress(state: State): string {\n  return `${state.stepIndex + 1} / ${steps.length}`;\n}\n\nexport function stepIndex(state: State): number {\n  return state.stepIndex;\n}\n\nexport function currentSection(state: State): React.FC {\n  return steps[state.stepIndex].section;\n}\n\nexport function currentGraphics(state: State): React.FC<StepProps> {\n  return steps[state.stepIndex].graphics;\n}\n\nexport function isTriOutOfBounds(state: State): boolean {\n  return state.ui.triOutOfBounds;\n}\n\nexport function dims(state: State): Dims {\n  return state.ui.dims;\n}\n\nexport function currentDuration(state: State): number {\n  return steps[state.stepIndex].duration;\n}\n\nexport function isLight(state: State): boolean {\n  return state.ui.theme === Theme.Light;\n}\n\nexport function altThemeString(state: State): string {\n  return state.ui.theme === Theme.Light ? 'Dark' : 'Light';\n}\n","import React from 'react';\nimport { initState } from './state';\nimport { Action } from './actions';\n\nexport * from './state';\nexport * from './reducer';\nexport * as Actions from './actions';\nexport * as Selectors from './selectors';\n\nexport const StateContext = React.createContext({\n  state: initState,\n  dispatch: null as any as React.Dispatch<Action>,\n});\n","import React from 'react';\nimport { noOp } from '../tools';\n\nexport function useDims<E extends HTMLElement>(\n  ref: React.RefObject<E>,\n  onChange: (dims: Dims) => void = noOp\n): Dims {\n  const [dims, setDims] = React.useState({\n    width: 0,\n    height: 0,\n    left: 0,\n    top: 0,\n  });\n\n  React.useLayoutEffect(() => {\n    function computeDims() {\n      if (ref.current) {\n        const { width, height, left, top } =\n          ref.current.getBoundingClientRect();\n        const dims = { width, height, left, top };\n        onChange(dims);\n        return setDims(dims);\n      }\n    }\n\n    computeDims();\n\n    window.addEventListener('resize', computeDims);\n    return () => window.removeEventListener('resize', computeDims);\n  }, [ref, onChange]);\n\n  return dims;\n}\n\nexport interface Dims {\n  width: number;\n  height: number;\n  left: number;\n  top: number;\n}\n","import React from 'react';\nimport { Device } from '../state';\n\nexport function useDevice(onChange: (device: Device) => void) {\n  const callback = React.useRef(onChange);\n\n  React.useLayoutEffect(() => {\n    function recompute() {\n      return callback.current(currentDevice());\n    }\n\n    recompute();\n\n    window.addEventListener('resize', recompute);\n    return () => window.removeEventListener('resize', recompute);\n  }, []);\n}\n\n// Keep in sync with src/index.css\nconst LARGE_BREAKPOINT = 1024;\n\nfunction currentDevice() {\n  if (window.innerWidth >= LARGE_BREAKPOINT) {\n    return Device.Laptop;\n  } else {\n    return Device.Mobile;\n  }\n}\n","export default __webpack_public_path__ + \"static/media/sonobe.cfe1c59c.svg\";","import React from 'react';\nimport { StateContext, Actions as A, Selectors as S } from './state';\nimport sonobe from './assets/sonobe.svg';\n\nconst Header: React.FC = () => {\n  const { state, dispatch } = React.useContext(StateContext);\n\n  function handleClick() {\n    return dispatch(A.toggleTheme());\n  }\n\n  return (\n    <header>\n      <nav>\n        <a href=\"https://wjlewis.github.io\" target=\"_blank\" rel=\"noreferrer\">\n          <img id=\"icon\" src={sonobe} alt=\"A sonobe module\" />\n        </a>\n\n        <div>\n          <button className=\"theme-toggle\" onClick={handleClick}>\n            {S.altThemeString(state)}\n          </button>\n\n          <a\n            href=\"https://www.github.com/wjlewis/pymos\"\n            target=\"_blank\"\n            rel=\"noreferrer\"\n          >\n            Source\n          </a>\n        </div>\n      </nav>\n    </header>\n  );\n};\n\nexport default Header;\n","import React from 'react';\nimport { StateContext, Selectors as S } from './state';\n\nconst Prose: React.FC = () => {\n  const { state } = React.useContext(StateContext);\n\n  const Section = S.currentSection(state);\n\n  return (\n    <article id=\"prose\">\n      <Section />\n    </article>\n  );\n};\n\nexport default Prose;\n","import React from 'react';\nimport { StateContext } from './state';\nimport { Locations as L } from './steps';\nimport { Vec } from './tools';\n\nconst DebugPoints: React.FC = () => {\n  const { state } = React.useContext(StateContext);\n  const { tri } = state;\n\n  const { r, h, v } = tri;\n\n  const a0 = L.a0(tri);\n  const a1 = L.a1(tri);\n  const b0 = L.b0(tri);\n  const b1 = L.b1(tri);\n  const c0 = L.c0(tri);\n  const c1 = L.c1(tri);\n\n  const abOut = L.abOut(tri);\n  const abIn = L.abIn(tri);\n  const cAuxV = L.cAuxV(tri);\n  const cAuxDiag = L.cAuxDiag(tri);\n  const cAuxH = L.cAuxH(tri);\n\n  return (\n    <g>\n      {/* Main Triangle Points */}\n      <DebugPoint name=\"r\" pos={r} />\n      <DebugPoint name=\"h\" pos={h} />\n      <DebugPoint name=\"v\" pos={v} />\n\n      {/* Main Squares */}\n      <DebugPolygon pts={[v, a0, a1, r]} />\n      <DebugPolygon pts={[r, b0, b1, h]} />\n      <DebugPolygon pts={[h, c0, c1, v]} />\n      <DebugPoint name=\"a0\" pos={a0} />\n      <DebugPoint name=\"a1\" pos={a1} />\n      <DebugPoint name=\"b0\" pos={b0} />\n      <DebugPoint name=\"b1\" pos={b1} />\n      <DebugPoint name=\"c0\" pos={c0} />\n      <DebugPoint name=\"c1\" pos={c1} />\n\n      {/* Auxiliary Squares */}\n      <DebugPolygon pts={[v, a0, abOut, b1, abIn]} />\n      <DebugPolygon pts={[r, cAuxV, cAuxDiag, cAuxH]} />\n      <DebugPoint name=\"abOut\" pos={abOut} />\n      <DebugPoint name=\"abIn\" pos={abIn} />\n      <DebugPoint name=\"cAuxV\" pos={cAuxV} />\n      <DebugPoint name=\"cAuxDiag\" pos={cAuxDiag} />\n      <DebugPoint name=\"cAuxH\" pos={cAuxH} />\n    </g>\n  );\n};\n\ninterface DebugPointProps {\n  name: string;\n  pos: Vec;\n}\n\nconst DebugPoint: React.FC<DebugPointProps> = props => {\n  const { name, pos } = props;\n  const { x, y } = pos;\n\n  return (\n    <g className=\"debug-point\">\n      <text x={x} y={y} dx=\"0.5em\" dy=\"-0.3em\">\n        {name}\n      </text>\n      <circle cx={x} cy={y} r=\"5\" />\n    </g>\n  );\n};\n\ninterface DebugPolygonProps {\n  pts: Vec[];\n}\n\nconst DebugPolygon: React.FC<DebugPolygonProps> = props => {\n  const { pts } = props;\n\n  const d = `M ${pts.map(pt => `${pt.x} ${pt.y}`).join(' L ')} Z`;\n\n  return <path className=\"debug-polygon\" d={d} />;\n};\n\nexport default DebugPoints;\n","import React from 'react';\nimport { StateContext, Actions as A, Selectors as S } from './state';\n\nconst MainTriangleReset: React.FC = () => {\n  const { state, dispatch } = React.useContext(StateContext);\n\n  function handleReset() {\n    return dispatch(A.resetMainTriangle());\n  }\n\n  if (S.isTriOutOfBounds(state)) {\n    return (\n      <div id=\"main-triangle-reset\">\n        <button onClick={handleReset}>Reset Triangle</button>\n      </div>\n    );\n  } else {\n    return null;\n  }\n};\n\nexport default MainTriangleReset;\n","import React from 'react';\nimport { useDims } from './hooks';\nimport { clamp } from './tools';\n\nexport interface SliderProps {\n  min: number;\n  max: number;\n  value: number;\n  onChange: (value: number) => void;\n}\n\nconst Slider: React.FC<SliderProps> = props => {\n  const { min, max, value, onChange } = props;\n  const [mouseDown, setMouseDown] = React.useState(false);\n  const ref = React.useRef<any>();\n  const { width, height, left } = useDims(ref);\n\n  React.useEffect(() => {\n    function handleMouseMove(e: MouseEvent) {\n      if (!mouseDown) {\n        return;\n      }\n\n      return onChange(computeValue(e.clientX - left));\n    }\n\n    function handleTouchMove(e: TouchEvent) {\n      if (!mouseDown || e.touches.length !== 1) {\n        return;\n      }\n\n      return onChange(computeValue(e.touches[0].clientX - left));\n    }\n\n    function handleMouseUp() {\n      return setMouseDown(false);\n    }\n\n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('touchmove', handleTouchMove);\n    document.addEventListener('mouseup', handleMouseUp);\n    document.addEventListener('touchend', handleMouseUp);\n\n    return () => {\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('touchmove', handleTouchMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n      document.removeEventListener('touchend', handleMouseUp);\n    };\n  });\n\n  function computeValue(x: number): number {\n    return clamp(\n      ((x - X_PADDING) / workingWidth) * (max - min) + min,\n      min,\n      max\n    );\n  }\n\n  const X_PADDING = 40;\n  const transform = `translate(0 ${height / 2})`;\n  const workingWidth = width - 2 * X_PADDING;\n\n  const sliderX = ((value - min) / (max - min)) * workingWidth;\n\n  function handleMouseDown() {\n    return setMouseDown(true);\n  }\n\n  function handleClick(e: React.MouseEvent) {\n    return onChange(computeValue(e.clientX - left));\n  }\n\n  return (\n    <svg ref={ref} width=\"100%\" height=\"45px\" onClick={handleClick}>\n      <g transform={transform}>\n        <line\n          className=\"slider-line\"\n          x1={X_PADDING}\n          y1=\"0\"\n          x2={width - X_PADDING}\n          y2=\"0\"\n          strokeWidth=\"2\"\n          strokeLinecap=\"round\"\n        />\n        <circle\n          className=\"slider-button\"\n          onMouseDown={handleMouseDown}\n          onTouchStart={handleMouseDown}\n          cx={X_PADDING + sliderX}\n          cy=\"0\"\n          r=\"15\"\n        />\n      </g>\n    </svg>\n  );\n};\n\nexport default Slider;\n","export default __webpack_public_path__ + \"static/media/play.812a279b.svg\";","export default __webpack_public_path__ + \"static/media/pause.bb5abc7d.svg\";","export default __webpack_public_path__ + \"static/media/restart.410a94ba.svg\";","import React from 'react';\nimport Slider from './Slider';\nimport playHref from './assets/play.svg';\nimport pauseHref from './assets/pause.svg';\nimport restartHref from './assets/restart.svg';\n\nexport interface ControlsProps {\n  frame: number;\n  playing: boolean;\n  duration: number;\n  togglePlay: () => void;\n  setFrame: (frame: number) => void;\n  restart: () => void;\n}\n\nconst Controls: React.FC<ControlsProps> = props => {\n  const { frame, playing, duration, togglePlay, setFrame, restart } = props;\n\n  function handleChange(frame: number) {\n    return setFrame(frame);\n  }\n\n  function handleClick() {\n    if (frame >= duration) {\n      return restart();\n    } else {\n      return togglePlay();\n    }\n  }\n\n  const buttonHref =\n    frame >= duration ? restartHref : playing ? pauseHref : playHref;\n  const buttonAlt = frame >= duration ? 'Restart' : playing ? 'Pause' : 'Play';\n\n  return (\n    <div id=\"controls\">\n      <button onClick={handleClick}>\n        <img src={buttonHref} alt={buttonAlt} />\n      </button>\n      <Slider min={0} max={duration} value={frame} onChange={handleChange} />\n    </div>\n  );\n};\n\nexport default Controls;\n","import React from 'react';\nimport { StateContext, Actions as A, Selectors as S, Dims } from './state';\nimport { useDims, useMouse, useAnimationFrame } from './hooks';\nimport { Vec } from './tools';\nimport DebugPoints from './DebugPoints';\nimport MainTriangleReset from './MainTriangleReset';\nimport Controls from './Controls';\n\nexport interface IllustrationProps {\n  debug?: boolean;\n}\n\nconst Illustration: React.FC<IllustrationProps> = props => {\n  const { state, dispatch } = React.useContext(StateContext);\n  const animControls = useAnimationFrame(S.currentDuration(state), [\n    S.stepIndex(state),\n  ]);\n  const ref = React.useRef<HTMLElement>(null);\n  const reportDimsChange = React.useCallback(\n    (dims: Dims) => dispatch(A.updateDims(dims)),\n    [dispatch]\n  );\n  const dims = useDims(ref, reportDimsChange);\n\n  const centerX = dims.width / 2;\n  const centerY = dims.height / 2;\n\n  useMouse(ref, {\n    onMove: pos =>\n      dispatch(A.mouseMove(new Vec(pos.x - centerX, pos.y - centerY))),\n    onUp: () => dispatch(A.mouseUp()),\n  });\n\n  const translation = `translate(${centerX} ${centerY})`;\n\n  const Graphics = S.currentGraphics(state);\n\n  return (\n    <article id=\"illustration\">\n      <svg id=\"canvas\" ref={ref as any as React.RefObject<SVGSVGElement>}>\n        <g transform={`${translation}`}>\n          <Graphics frame={animControls.frame} />\n          {props.debug && <DebugPoints />}\n        </g>\n      </svg>\n      <Controls {...animControls} />\n\n      <MainTriangleReset />\n    </article>\n  );\n};\n\nexport default Illustration;\n","import React from 'react';\n\nexport function useAnimationFrame(\n  duration: number,\n  deps: any[] = []\n): AnimControls {\n  const [frame, setFrame] = React.useState(0);\n  const [playing, setPlaying] = React.useState(true);\n  const pausedFrame = React.useRef(0);\n\n  React.useLayoutEffect(() => {\n    setFrame(0);\n    setPlaying(true);\n    pausedFrame.current = 0;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, deps);\n\n  React.useLayoutEffect(() => {\n    let start: number;\n    let rafHandle: number;\n\n    function step(timestamp: DOMHighResTimeStamp) {\n      if (!start) {\n        start = timestamp;\n      }\n\n      const currentFrame = timestamp - start + pausedFrame.current;\n\n      if (playing && currentFrame < duration) {\n        setFrame(currentFrame);\n        rafHandle = requestAnimationFrame(step);\n      } else {\n        setPlaying(false);\n        setFrame(duration);\n      }\n    }\n\n    if (playing) {\n      rafHandle = requestAnimationFrame(step);\n    }\n\n    return () => cancelAnimationFrame(rafHandle);\n  }, [playing, duration]);\n\n  const togglePlay = React.useCallback(() => {\n    if (playing) {\n      pausedFrame.current = frame;\n    }\n    setPlaying(!playing);\n  }, [playing, frame]);\n\n  const restart = React.useCallback(() => {\n    pausedFrame.current = 0;\n    setPlaying(true);\n  }, []);\n\n  const updateFrame = React.useCallback(\n    frame => {\n      if (playing) {\n        setPlaying(false);\n      }\n      pausedFrame.current = frame;\n      setFrame(frame);\n    },\n    [playing]\n  );\n\n  return {\n    duration,\n    frame,\n    playing,\n    togglePlay,\n    restart,\n    setFrame: updateFrame,\n  };\n}\n\nexport interface AnimControls {\n  duration: number;\n  frame: number;\n  playing: boolean;\n  togglePlay: () => void;\n  restart: () => void;\n  setFrame: (frame: number) => void;\n}\n","import React from 'react';\nimport { Vec } from '../tools';\n\nexport function useMouse<E extends HTMLElement>(\n  ref: React.RefObject<E>,\n  handlers: Handlers\n) {\n  const [bounds, setBounds] = React.useState({ left: 0, top: 0 });\n\n  const { onMove, onUp } = handlers;\n\n  React.useEffect(() => {\n    function computeBounds() {\n      if (ref.current) {\n        const { left, top } = ref.current.getBoundingClientRect();\n        return setBounds({ left, top });\n      }\n    }\n\n    computeBounds();\n\n    window.addEventListener('resize', computeBounds);\n    return () => window.removeEventListener('resize', computeBounds);\n  }, [ref]);\n\n  React.useEffect(() => {\n    function handleMove(e: MouseEvent) {\n      const { left, top } = bounds;\n      const { clientX, clientY } = e;\n      return onMove(new Vec(clientX - left, clientY - top));\n    }\n\n    function handleTouchMove(e: TouchEvent) {\n      if (e.touches.length !== 1) {\n        return;\n      }\n      return handleMove(e.touches[0] as any as MouseEvent);\n    }\n    function handleUp() {\n      return onUp();\n    }\n\n    document.addEventListener('mousemove', handleMove);\n    document.addEventListener('touchmove', handleTouchMove);\n    document.addEventListener('mouseup', handleUp);\n    document.addEventListener('touchend', handleUp);\n\n    return () => {\n      document.removeEventListener('mousemove', handleMove);\n      document.removeEventListener('touchmove', handleTouchMove);\n      document.removeEventListener('mouseup', handleUp);\n      document.removeEventListener('touchend', handleUp);\n    };\n  }, [onMove, onUp, bounds]);\n\n  return ref;\n}\n\nexport interface Handlers {\n  onMove: (pos: Vec) => unknown;\n  onUp: () => unknown;\n}\n","import React from 'react';\nimport { StateContext, Selectors as S, Actions as A } from './state';\n\nconst Footer: React.FC = () => {\n  const { state, dispatch } = React.useContext(StateContext);\n\n  const noPrevious = !S.canGoPrevious(state);\n  const noNext = !S.canGoNext(state);\n\n  function handlePrevious() {\n    return dispatch(A.previousStep());\n  }\n\n  function handleNext() {\n    return dispatch(A.nextStep());\n  }\n\n  return (\n    <footer>\n      <nav>\n        <button\n          onClick={handlePrevious}\n          style={{ visibility: noPrevious ? 'hidden' : 'initial' }}\n        >\n          Previous\n        </button>\n\n        <span>{S.stepProgress(state)}</span>\n\n        <button\n          onClick={handleNext}\n          style={{ visibility: noNext ? 'hidden' : 'initial' }}\n        >\n          Next\n        </button>\n      </nav>\n    </footer>\n  );\n};\n\nexport default Footer;\n","import React from 'react';\nimport {\n  StateContext,\n  initState,\n  reducer,\n  Actions as A,\n  Selectors as S,\n} from './state';\nimport { useDevice } from './hooks';\nimport Header from './Header';\nimport Prose from './Prose';\nimport Illustration from './Illustration';\nimport Footer from './Footer';\n\nconst App: React.FC = () => {\n  const [state, dispatch] = React.useReducer(reducer, initState);\n  useDevice(device => dispatch(A.updateDevice(device)));\n\n  return (\n    <main className={S.isLight(state) ? 'light' : 'dark'}>\n      <StateContext.Provider value={{ state, dispatch }}>\n        <Header />\n        <article id=\"content\">\n          <Prose />\n          <Illustration />\n        </article>\n        <Footer />\n      </StateContext.Provider>\n    </main>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}